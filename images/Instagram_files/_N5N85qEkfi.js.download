;/*FB_PKG_DELIM*/

__d("IGDAWContactSearchConversionUtils",["MWChatSearchResultType"],(function(t,n,r,o,a,i,l){"use strict";var e=["rawData"],s=["ttlcMessageType"];function u(e){var t,n=e.rawData;return{chatSearchTypeaheadDataEntry:f(e),id:n.id,igid:(t=n.igid)!=null?t:"",imageUrl:n.imageUrl,isDisappearingModeSettingOn:n.isDisappearingModeSettingOn,isE2EE:n.isE2EE,isInstamadilloCutover:n.isInstamadilloCutover,isTTLCClipEnabled:n.isTTLCClipEnabled,isTTLCGenericXMAShareEnabled:n.isTTLCGenericXMAShareEnabled,isTTLCMediaShareEnabled:n.isTTLCMediaShareEnabled,isTTLCStoryShareEnabled:n.isTTLCStoryShareEnabled,secondaryImageUrl:n.secondaryImageUrl,subtext:n.subtext,threadName:n.displayName,ttlcMessageType:n.ttlcMessageType}}function c(e){var t,n=e.rawData;return{chatSearchTypeaheadDataEntry:f(e),id:n.id,igid:(t=n.igid)!=null?t:"",imageUrl:n.imageUrl,isDisappearingModeSettingOn:n.isDisappearingModeSettingOn,isE2EE:n.isE2EE,isGroupCreationReachable:n.isGroupCreationReachable,isInstamadilloCutover:n.isInstamadilloCutover,isTTLCClipEnabled:n.isTTLCClipEnabled,isTTLCGenericXMAShareEnabled:n.isTTLCGenericXMAShareEnabled,isTTLCMediaShareEnabled:n.isTTLCMediaShareEnabled,isTTLCStoryShareEnabled:n.isTTLCStoryShareEnabled,isVerified:n.verificationStatus==="BLUE_VERIFIED",otherUserId:n.otherUserId,reachabilityStatus:n.reachabilityStatus,subtext:n.subtext,threadName:n.displayName,ttlcMessageType:n.ttlcMessageType}}function d(e,t){t.set(e.id,{candidate:e,type:"user"})}function m(e,t){t.set(e.id,{candidate:e,type:"thread"})}function p(e){var t=new Map;for(var n of e){var o=n.rawData;switch(o.resultType){case r("MWChatSearchResultType").MESSAGE:case r("MWChatSearchResultType").PAGE:break;case r("MWChatSearchResultType").GROUP:{m(u(n),t);break}case r("MWChatSearchResultType").USER:{d(c(n),t);break}case r("MWChatSearchResultType").AI_BOT:break}}return t}function _(e){var t=Array.from(e.values()).filter(function(e){return e.type==="user"}).map(function(e){var t=e.candidate;return t.isE2EE&&t.otherUserId!=null?t.otherUserId:t.id});return t}function f(t){var n=t.rawData,r=babelHelpers.objectWithoutPropertiesLoose(t,e),o=n.ttlcMessageType,a=babelHelpers.objectWithoutPropertiesLoose(n,s);return babelHelpers.extends({},r,{rawData:a})}l.convertSearchResultRawDataToIGDThread=u,l.convertSearchResultRawDataToIGDUser=c,l.covertMWContactSearchResultsToIGDCandidates=p,l.getIGDUserCandidateContactIds=_}),98);
__d("IGDThreadlineContextProvider",["IGDThreadlineContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(30),n=e.children,r=d(!1),a=r[0],i=r[1],l=d(null),u=l[0],c=l[1],m=d(!1),p=m[0],_=m[1],f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f={id:null,type:"reshared"},t[0]=f):f=t[0];var g=d(f),h=g[0],y=g[1],C;t[1]===Symbol.for("react.memo_cache_sentinel")?(C=new Set,t[1]=C):C=t[1];var b=d(C),v=b[0],S=b[1],R;t[2]===Symbol.for("react.memo_cache_sentinel")?(R=function(t,n){y({id:t,type:n})},t[2]=R):R=t[2];var L;t[3]!==h?(L={currentReel:h,setCurrentReel:R},t[3]=h,t[4]=L):L=t[4];var E=L,k;t[5]!==p?(k={isThreadlineComposerFocused:p,setIsThreadlineComposerFocused:_},t[5]=p,t[6]=k):k=t[6];var I=k,T;t[7]!==u?(T={reelTimestamp:u,setReelTimestamp:c},t[7]=u,t[8]=T):T=t[8];var D=T,x;t[9]!==a?(x={setShouldShowThreadline:i,shouldShowThreadline:a},t[9]=a,t[10]=x):x=t[10];var $=x,P,N;t[11]===Symbol.for("react.memo_cache_sentinel")?(P=function(t){S(function(e){var n=new Set(e);return n.add(t),n})},N=function(){S(new Set)},t[11]=P,t[12]=N):(P=t[11],N=t[12]);var M;t[13]!==v?(M={addSentReelId:P,clearSentReelIds:N,isReelSent:function(t){return t!=null&&v.has(t)}},t[13]=v,t[14]=M):M=t[14];var w=M,A;t[15]!==n||t[16]!==w?(A=s.jsx(o("IGDThreadlineContext").ThreadlineSentReelsContext.Provider,{value:w,children:n}),t[15]=n,t[16]=w,t[17]=A):A=t[17];var F;t[18]!==$||t[19]!==A?(F=s.jsx(o("IGDThreadlineContext").ThreadlineShouldShowContext.Provider,{value:$,children:A}),t[18]=$,t[19]=A,t[20]=F):F=t[20];var O;t[21]!==F||t[22]!==D?(O=s.jsx(o("IGDThreadlineContext").ThreadlineReelTimestampContext.Provider,{value:D,children:F}),t[21]=F,t[22]=D,t[23]=O):O=t[23];var B;t[24]!==I||t[25]!==O?(B=s.jsx(o("IGDThreadlineContext").ThreadlineIsComposerFocusedContext.Provider,{value:I,children:O}),t[24]=I,t[25]=O,t[26]=B):B=t[26];var W;return t[27]!==E||t[28]!==B?(W=s.jsx(o("IGDThreadlineContext").ThreadlineCurrentReelContext.Provider,{value:E,children:B}),t[27]=E,t[28]=B,t[29]=W):W=t[29],W}l.default=m}),98);
__d("LSGetFirstAvailableQuickReplyCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.sortBy(t.db.table(20).fetch(),[["ctaId","DESC"]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxGetFirstAvailableQuickReplyCTAIDStoredProcedure",e.__tables__=["quick_reply_ctas"],a.exports=e}),null);
__d("LSInsertQuickReplyCTA",["LSArrayGetObjectAt","LSGetFirstAvailableQuickReplyCTAID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=t.i64.of_int32(e[3].length),t.i64.gt(r[0],t.i64.cast([0,0]))?t.sequence([function(n){return t.forEach(t.db.table(20).fetch([[[e[0],e[1]]]]),function(e){return e.delete()})},function(e){return t.storedProcedure(n("LSGetFirstAvailableQuickReplyCTAID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=r[1],r[3]=t.i64.of_int32(e[3].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(o){return r[7]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(n){return r[10]=r[8].get("title"),r[11]=r[8].get("type"),r[12]=r[8].get("image_url"),r[13]=r[8].get("platform_token"),t.db.table(20).add({threadKey:e[0],messageId:e[1],ctaId:r[2],messageTimestampMs:e[2],title:r[10],type_:r[11],imageUrl:r[12],platformToken:r[13]})},function(e){return r[2]=t.i64.add(r[2],t.i64.cast([0,1]))}])}):t.resolve()},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(n){return r[6]=r[4].get("quick_reply_type"),t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(e){var t=e.update,n=e.item;return t({hasQuickReplies:!0,quickReplyType:r[6]})})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxInsertQuickReplyCTAStoredProcedure",e.__tables__=["quick_reply_ctas","messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticGroupThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetViewerFBID","LSInsertQuickReplyCTA","LSIssueNewTask","LSLocalApplyOptimisticMessage"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("page_id"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[2]=r[26]}]):t.resolve(r[2]=void 0)},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("product_type"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[3]=r[26]}]):t.resolve(r[3]=void 0)},function(e){var o,a;return r[3]==="CTM"?(r[2]!==void 0?r[19]=t.i64.from_string(r[2]):r[19]=r[1],r[4]=r[19]):r[4]=r[1],r[5]=t.i64.cast([0,1083495711]),r[6]=t.i64.cast([0,1024]),r[7]=t.i64.cast([0,0]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,134217728]),r[10]=!0,r[10]?(t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,205]))?r[19]=void 0:r[19]="",a=[r[19],void 0,void 0,void 0,void 0],r[11]=a[0],r[12]=a[1],r[13]=a[2],r[14]=a[3],r[15]=a[4]):(r[19]=(void 0).get("nullstate_description_text1"),r[19]!==void 0?r[20]=r[19]:r[20]="",r[21]=(void 0).get("nullstate_description_text2"),r[22]=(void 0).get("nullstate_description_text3"),r[23]=(void 0).get("nullstate_description_text4"),r[24]=(void 0).get("nullstate_description_text5"),o=[r[20],r[21],r[22],r[23],r[24]],r[11]=o[0],r[12]=o[1],r[13]=o[2],r[14]=o[3],r[15]=o[4]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.forEach(t.filter(t.db.table(9).fetch([[[r[4]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[4],mailboxType:t.i64.cast([0,0]),threadType:t.i64.cast([0,2]),clientThreadKey:r[4],folderName:"inbox",parentThreadKey:t.i64.cast([0,0]),lastActivityTimestampMs:t.i64.cast([0,0]),lastReadWatermarkTimestampMs:t.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:r[16],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),capabilities:r[5],capabilities2:r[6],capabilities3:r[7],capabilities4:r[8],capabilities5:r[9],nullstateDescriptionText1:r[11],nullstateDescriptionText2:r[12],nullstateDescriptionText3:r[13],threadName:e[2]})},function(e){return r[17]=t.createArray(),t.resolve()},function(n){return e[3]!==void 0?t.db.table(312).add({threadKey:r[4],metadata:e[3]}):t.resolve()},function(o){return r[18]=t.i64.of_int32(e[0].length),t.i64.gt(r[18],t.i64.cast([0,0]))?t.loopAsync(r[18],function(o){return r[19]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[19]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],t})},function(e){return t.forEach(t.filter(t.db.table(14).fetch([[[r[4],r[20]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.contactId,r[20])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(e){return t.db.table(14).add({threadKey:r[4],contactId:r[20],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}])}):t.resolve()},function(e){return o[0]=r[4]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticGroupThreadStoredProcedure",e.__tables__=["threads","threads_optimistic_metadata","participants"],a.exports=e}),null);
__d("LSCreateGroupThreadWithAdminText",["LSCreateOfflineThreadingID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticGroupThread"),e[0],e[1],e[2],void 0).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return e[2],t.sequence([function(e){return r[1]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[1]).then(function(e){var t;return t=e,r[2]=t[0],t})},function(e){return t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(e){var n=e.update,o=e.item;return n({otidOfFirstMessage:t.i64.to_string(r[2])})})},function(o){return r[3]=new t.Map,r[3].set("thread_id",r[0]),r[3].set("otid",t.i64.to_string(r[2])),r[3].set("source",t.i64.cast([0,0])),r[3].set("send_type",t.i64.cast([0,8])),e[3]!==void 0&&r[3].set("text",e[3]),r[4]=new t.Map,r[4].set("participants",e[0]),r[4].set("send_payload",r[3]),e[2]!==void 0&&r[4].set("thread_name",e[2]),r[5]=r[4].get("send_payload"),r[6]=r[5].get("thread_id"),r[7]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[6]),t.i64.cast([0,130]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxCreateGroupThreadWithAdminTextStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSCreateGroupThreadWithAdminTextStoredProcedure",["LSCreateGroupThreadWithAdminText","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCreateGroupThreadWithAdminText"),a.participants,a.nullstateDescriptionText,a.threadName,a.text);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSForceImmediateSync",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({minTimeToSyncTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreForceImmediateSyncStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSForceImmediateSyncStoredProcedure",["LSForceImmediateSync","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSForceImmediateSync"),a.dbType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").__setRef("MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE");function s(t,n,r,o){return e.load().then(function(e){var a=e.onMiThreadExistsForJid__DO_NOT_USE;return a(t,n,r,o)})}l.default=s}),98);
__d("MWV2OnAuthoritativeThreadInsert",["I64","LSAuthorityLevel","LSIntEnum","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){var i=t[0],l=o("ReQL").fromTableAscending(n.tables.threads.index("clientThreadKey")).getKeyRange(i).subscribe(function(t,n){if(n.operation!=="delete"){var i=n.value;if((e||(e=o("I64"))).equal(i.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return a(i),l()}})}l.onAuthoritativeThreadInsert=u}),98);
__d("MAWCreateAndWaitForAuthoritativeOneToOneThread",["LSIntEnum","LSResult","MAWCreateOneToOneThread","MAWJids","MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE","MWV2OnAuthoritativeThreadInsert","Promise","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,l,u){r("promiseDone")(o("MAWCreateOneToOneThread").call(t,a,void 0,l).then(function(a){return t.runInTransaction(function(i){return r("MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE")(i,a.jid,l,function(i,l){return l!=null&&(a.isCreated?o("MWV2OnAuthoritativeThreadInsert").onAuthoritativeThreadInsert(r("LSResult")(l),t,function(e){return u(e.threadKey,e.clientThreadKey,e.threadType)}):u(l,o("MAWJids").convertChatJidToIntJid(a.jid),(s||(s=o("LSIntEnum"))).ofNumber(15))),(e||(e=n("Promise"))).resolve()})},"readwrite",void 0,void 0,i.id+":43")}))}l.default=u}),98);
__d("MAWCutoverQPLLogger",["QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={instanceKey:0,isInProgress:!1};function s(t){return e.isInProgress&&r("QPLUserFlow").endCancel(r("qpl")._(1056840990,"2431"),{instanceKey:e.instanceKey}),r("QPLUserFlow").start(r("qpl")._(1056840990,"2431"),{annotations:{bool:{is_dtc:t}},instanceKey:++e.instanceKey,timeoutInMs:1e4}),e.isInProgress=!0,e.instanceKey}function u(e,t,n){e!=null&&r("QPLUserFlow").addPoint(r("qpl")._(1056840990,"2431"),t,babelHelpers.extends({instanceKey:e},n))}function c(e,t){e!=null&&r("QPLUserFlow").addAnnotations(r("qpl")._(1056840990,"2431"),t,{instanceKey:e})}function d(t){t!=null&&(e.isInProgress=!1,r("QPLUserFlow").endSuccess(r("qpl")._(1056840990,"2431"),{instanceKey:t}))}function m(e,t){e!=null&&r("QPLUserFlow").endFailure(r("qpl")._(1056840990,"2431"),t,{instanceKey:e})}l.startQpl=s,l.addPoint=u,l.addAnnotations=c,l.endSuccess=d,l.endFailure=m}),98);
__d("MWLSDatabaseLazySync",["I64","Int64Hooks","LSFactory","LSForceImmediateSyncStoredProcedure","LSSyncGroupsUtils","Promise","ReQL","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return e.runInTransaction(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.sync_groups).getKeyRange(t)).then(function(a){return a!=null&&(u||(u=o("I64"))).equal(a.minTimeToSyncTimestampMs,o("LSSyncGroupsUtils").neverSyncTimestamp)?r("LSForceImmediateSyncStoredProcedure")(r("LSFactory")(e),{dbType:t}):(s||(s=n("Promise"))).resolve()})},"readwrite",void 0,void 0,i.id+":28")}function d(t){var n=(e||(e=r("useReStore")))();return o("Int64Hooks").useCallbackInt64(function(){return c(n,t)},[t,n])}l.sync=c,l.useSync=d}),98);
__d("QPLCreateGroupThreadLogging",["QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(){r("QPLUserFlow").endSuccess(r("qpl")._(832770470,"483"))}function s(){r("QPLUserFlow").start(r("qpl")._(832770470,"483"),{annotations:{bool:{isSecure:!0}}})}function u(){r("QPLUserFlow").endFailure(r("qpl")._(832770470,"483"),"create_group_fail",{annotations:{bool:{isSecure:!0}}})}function c(){r("QPLUserFlow").start(r("qpl")._(832770470,"483"),{annotations:{bool:{isSecure:!1}}})}function d(){r("QPLUserFlow").endFailure(r("qpl")._(832770470,"483"),"create_group_fail",{annotations:{bool:{isSecure:!1}}})}l.QPLEndSuccessCreateGroup=e,l.QPLStartCreateSecureGroup=s,l.QPLEndFailureCreateSecureGroup=u,l.QPLStartCreateOpenGroup=c,l.QPLEndFailureCreateOpenGroup=d}),98);
__d("useMWPCreateThread",["I64","LSAuthorityLevel","LSCreateGroupThreadWithAdminTextStoredProcedure","LSFactory","LSIntEnum","LSVec","Promise","ReQL","promiseDone","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(d||(d=o("react"))).useCallback;function p(){var t=(c||(c=r("useReStore")))();return m(function(a,l,c){return t.runInTransaction(function(e){return r("LSCreateGroupThreadWithAdminTextStoredProcedure")(r("LSFactory")(e),{participants:r("LSVec").ofArray(a),text:c!=null?c:void 0,threadName:l!=null?l:void 0})},"readwrite",void 0,void 0,i.id+":34").then(function(a){var i=a[0];return new(e||(e=n("Promise")))(function(e){var n=o("ReQL").fromTableAscending(t.tables.threads.index("clientThreadKey")).getKeyRange(i),a={contents:function(){}},l=function(n){if((s||(s=o("I64"))).equal(n.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return a.contents(),e(n)};a.contents=n.subscribe(function(e,t){t.operation!=="delete"&&l(t.value)}),r("promiseDone")(o("ReQL").firstExnAsync(n),l)})})},[t])}l.default=p}),98);
__d("useCreateOpenGroupThread",["I64","IGDNavigation","QPLCreateGroupThreadLogging","asyncToGeneratorRuntime","react","react-compiler-runtime","useMWPCreateThread"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(e){var t=o("react-compiler-runtime").c(4),a=r("useMWPCreateThread")(),i=o("IGDNavigation").useIGDNavigation(),l;return t[0]!==a||t[1]!==e||t[2]!==i?(l=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){o("QPLCreateGroupThreadLogging").QPLStartCreateOpenGroup();var n=t.map(d);try{var r=yield a(n);if(r)return i.openTabOrInbox({clientThreadKey:r.clientThreadKey,threadKey:r.threadKey,threadType:r.threadType},e),o("QPLCreateGroupThreadLogging").QPLEndSuccessCreateGroup(),r.threadKey}catch(e){o("QPLCreateGroupThreadLogging").QPLEndFailureCreateOpenGroup()}return null});return function(n){return t.apply(this,arguments)}})(),t[0]=a,t[1]=e,t[2]=i,t[3]=l):l=t[3],l}function d(e){return(s||(s=o("I64"))).of_string(e)}l.default=c}),98);
__d("useMWPCreateOneToOneThreadThenNavigate",["MAWCreateAndWaitForAuthoritativeOneToOneThread","MAWCutoverQPLLogger","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(t,n,a){var i=(e||(e=r("useReStore")))(),l=u(function(e,r,o){return t.openTabOrInbox({clientThreadKey:r,threadKey:e,threadType:o},n!=null?n:"groupMembers",void 0,void 0,{subEntrypoint:a})},[n,t,a]);return u(function(e,t){o("MAWCutoverQPLLogger").addPoint(t,"create_one_to_one_thread_then_navigate_started"),r("MAWCreateAndWaitForAuthoritativeOneToOneThread")(i,e,"MWPCreateOneToOneThreadThenNavigate",function(e,n,r){o("MAWCutoverQPLLogger").addPoint(t,"navigate_to_thread"),o("MAWCutoverQPLLogger").endSuccess(t),l(e,n,r)})},[i,l])}l.default=c}),98);
__d("useCreateSecureOneToOneThread",["I64","IGDNavigation","asyncToGeneratorRuntime","react","react-compiler-runtime","useMWPCreateOneToOneThreadThenNavigate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(){var e=o("react-compiler-runtime").c(2),t=o("IGDNavigation").useIGDNavigation(),a=r("useMWPCreateOneToOneThreadThenNavigate")(t),i;return e[0]!==a?(i=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=(s||(s=o("I64"))).of_string(e);return yield a(t),t});return function(n){return e.apply(this,arguments)}})(),e[0]=a,e[1]=i):i=e[1],i}l.default=c}),98);
__d("useFetchExistingThreadWithContactIds",["I64","Int64Hooks","MWPActor.react","Promise","ReQL","asyncToGeneratorRuntime","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){if(e.length!==t.length)return!1;var n=new Set(e);return t.every(function(e){return n.has(e)})}function d(){var t=o("react-compiler-runtime").c(7),a=(u||(u=r("useReStore")))(),i=o("MWPActor.react").useActor(),l;t[0]!==i||t[1]!==a.tables.participants||t[2]!==a.tables.threads?(l=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var l=(s||(s=o("I64"))).to_string(i),u=new Set(t);u.delete(l);var d=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.participants).filter(function(e){return u.has((s||(s=o("I64"))).to_string(e.contactId))}).map(p)),_=[].concat(Array.from(u),[l]),f=(yield(e||(e=n("Promise"))).all(d.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(a.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(e).map(m)),n=c(_,t);return n?e:null});return function(t){return e.apply(this,arguments)}})()))).filter(Boolean),g=new Set(f),h=yield e.all(Array.from(g).map(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(e).filter(function(e){return(s||(s=o("I64"))).to_int32(e.threadType)===r}))}));return h[0]});return function(n,r){return t.apply(this,arguments)}})(),t[0]=i,t[1]=a.tables.participants,t[2]=a.tables.threads,t[3]=l):l=t[3];var d;return t[4]!==i||t[5]!==a?(d=[i,a],t[4]=i,t[5]=a,t[6]=d):d=t[6],o("Int64Hooks").useCallbackInt64(l,d)}function m(e){return(s||(s=o("I64"))).to_string(e.contactId)}function p(e){return e.threadKey}l.default=d}),98);
__d("useOpenOrCreateGroupThread",["IGDNavigation","asyncToGeneratorRuntime","react","react-compiler-runtime","useCreateOpenGroupThread","useFetchExistingThreadWithContactIds"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(5),a=o("IGDNavigation").useIGDNavigation(),i=r("useFetchExistingThreadWithContactIds")(),l=r("useCreateOpenGroupThread")(e),s;return t[0]!==l||t[1]!==e||t[2]!==i||t[3]!==a?(s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield i(t,2);return n?(a.openTabOrInbox({clientThreadKey:n.clientThreadKey,threadKey:n.threadKey,threadType:n.threadType},e),n.threadKey):l(t)});return function(n){return t.apply(this,arguments)}})(),t[0]=l,t[1]=e,t[2]=i,t[3]=a,t[4]=s):s=t[4],s}l.default=u}),98);
__d("useOpenOrCreateOpenOneToOneThread",["FBLogger","I64","IGDNavigation","LSFactory","LSVerifyThreadRowExistsStoredProcedure","Promise","asyncToGeneratorRuntime","react","react-compiler-runtime","requireDeferred","useCreateSecureOneToOneThread","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback,m=r("requireDeferred")("MAWVerifyThreadCutover").__setRef("useOpenOrCreateOpenOneToOneThread");function p(t){var a=o("react-compiler-runtime").c(5),l=(s||(s=r("useReStore")))(),c=o("IGDNavigation").useIGDNavigation(),d=r("useCreateSecureOneToOneThread")(),p;return a[0]!==d||a[1]!==l||a[2]!==t||a[3]!==c?(p=(function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var s=(u||(u=o("I64"))).of_string(a),p=yield m.load(),_=yield p.verifyThreadCutover((e||(e=n("Promise"))).resolve(l),s);if(_)return d(a);try{yield l.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(u||(u=o("I64"))).of_int32(1),threadKey:s,threadType:u.of_int32(1)})},"readwrite",void 0,void 0,i.id+":55"),c.openTabOrInbox({clientThreadKey:s,threadKey:s,threadType:(u||(u=o("I64"))).of_int32(1)},t)}catch(e){r("FBLogger")("ig_web","create_one_to_one_thread").mustfix("Failed to create 1 to 1 open thread by verifying thread row exists.")}return s});return function(t){return a.apply(this,arguments)}})(),a[0]=d,a[1]=l,a[2]=t,a[3]=c,a[4]=p):p=a[4],p}l.default=p}),98);
__d("useOpenOrCreateThreadFromIGDCandidate",["CurrentUser","IGDAWContactSearchConversionUtils","IGDEntryPoints","IGDThreadListNewMessageLoggingDataContext","MWLSThreadDisplayContext","MessengerWebUXLogger","asyncToGeneratorRuntime","react","react-compiler-runtime","useOpenOrCreateGroupThread","useOpenOrCreateOpenOneToOneThread"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(7),t=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),a=t==="ChatTab",i=a?"igdChatTabsOmnipicker":"inboxNewMessage",l=i==="igdChatTabsOmnipicker"?o("IGDEntryPoints").IGDEntryPoints.IGD_CHAT_TABS_OMNIPICKER:i==="inboxNewMessage"?o("IGDEntryPoints").IGDEntryPoints.IGD_INBOX_OMNIPICKER:void 0,s=r("useOpenOrCreateOpenOneToOneThread")(i),u=r("useOpenOrCreateGroupThread")(i),c=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),d=r("MessengerWebUXLogger").useInteractionLogger(),m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=r("CurrentUser").getEIMU(),e[0]=m):m=e[0];var p=m,_;return e[1]!==c||e[2]!==l||e[3]!==d||e[4]!==u||e[5]!==s?(_=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!(e.size<=0)){var t=o("IGDAWContactSearchConversionUtils").getIGDUserCandidateContactIds(e);t.length===2&&(t=t.filter(function(e){return e!==p})),d==null||d({entryPoint:l,eventName:"create_thread_attempt",extraData:{participant_ids:[].concat(t).join(", "),thread_size:t.length.toString()},flowInstanceId:c}),t.length>1?yield u(t):t.length===1&&(yield s(t[0])),d==null||d({entryPoint:l,eventName:"create_or_open_thread_success",flowInstanceId:c})}});return function(n){return e.apply(this,arguments)}})(),e[1]=c,e[2]=l,e[3]=d,e[4]=u,e[5]=s,e[6]=_):_=e[6],_}l.default=u}),98);