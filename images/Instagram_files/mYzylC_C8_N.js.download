;/*FB_PKG_DELIM*/

__d("AudioClipsTranscriptionButtonClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1004"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_button_click",e),u=s;l.default=u}),98);
__d("AudioClipsTranscriptionCompleteFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1097"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_complete",e),u=s;l.default=u}),98);
__d("AudioClipsTranscriptionExpandClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1098"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_expand_click",e),u=s;l.default=u}),98);
__d("AudioClipsTranscriptionFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1279"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_failure",e),u=s;l.default=u}),98);
__d("C4gEngagementFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1922200"),s=o("FalcoLoggerInternal").create("c4g_engagement",e),u=s;l.default=u}),98);
__d("LsMessageClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743853"),s=o("FalcoLoggerInternal").create("ls_message_click",e),u=s;l.default=u}),98);
__d("MLCHealthLoggerEvent",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({COMMIT_CREATE:"commit_create",COMMIT_EDIT:"commit_edit",DAILY_INTERACTION_WITH_SURFACE:"daily_interaction_with_surface"}),l=e;i.default=l}),66);
__d("MlcHealthBizappEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2646"),s=o("FalcoLoggerInternal").create("mlc_health_bizapp_event",e),u=s;l.default=u}),98);
__d("MlcHealthFacebookAndWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2647"),s=o("FalcoLoggerInternal").create("mlc_health_facebook_and_workplace_event",e),u=s;l.default=u}),98);
__d("MlcHealthFacebookEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2648"),s=o("FalcoLoggerInternal").create("mlc_health_facebook_event",e),u=s;l.default=u}),98);
__d("MlcHealthInstagramEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3766"),s=o("FalcoLoggerInternal").create("mlc_health_instagram_event",e),u=s;l.default=u}),98);
__d("MlcHealthInternalToolsEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2649"),s=o("FalcoLoggerInternal").create("mlc_health_internal_tools_event",e),u=s;l.default=u}),98);
__d("MlcHealthMessagingLightswitchEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2650"),s=o("FalcoLoggerInternal").create("mlc_health_messaging_lightswitch_event",e),u=s;l.default=u}),98);
__d("MlcHealthWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2651"),s=o("FalcoLoggerInternal").create("mlc_health_workplace_event",e),u=s;l.default=u}),98);
__d("MLCHealthInstrumentationPlugin__INTERNAL.react",["Lexical","LexicalComposerContext","LexicalUtils","MLCInstrumentationCommands","MlcHealthBizappEventFalcoEvent","MlcHealthFacebookAndWorkplaceEventFalcoEvent","MlcHealthFacebookEventFalcoEvent","MlcHealthInstagramEventFalcoEvent","MlcHealthInternalToolsEventFalcoEvent","MlcHealthMessagingLightswitchEventFalcoEvent","MlcHealthWorkplaceEventFalcoEvent","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useLayoutEffect,u=new Set;function c(e){switch(e){case"facebook":return r("MlcHealthFacebookEventFalcoEvent");case"workplace":return r("MlcHealthWorkplaceEventFalcoEvent");case"facebook_and_workplace":return r("MlcHealthFacebookAndWorkplaceEventFalcoEvent");case"internal_tools":return r("MlcHealthInternalToolsEventFalcoEvent");case"messaging_lightswitch":return r("MlcHealthMessagingLightswitchEventFalcoEvent");case"bizapp":return r("MlcHealthBizappEventFalcoEvent");case"instagram":return r("MlcHealthInstagramEventFalcoEvent");default:return null}}function d(e,t,n){var r;(r=c(e))==null||r.log(function(){return{event:n,surface:t}})}function m(e){var t=e.policyProduct,n=e.surface,r=o("LexicalComposerContext").useLexicalComposerContext(),a=r[0];return s(function(){var e=function(){};return u.has(n)||(e=a.registerUpdateListener(function(r){var o=r.dirtyLeaves,i=r.tags;if(u.has(n)){e();return}o.size===0||i.has("history-merge")||!a.isEditable()||(u.add(n),d(t,n,"daily_interaction_with_surface"),e())})),o("LexicalUtils").mergeRegister(e,a.registerCommand(o("MLCInstrumentationCommands").COMMIT_COMMAND,function(e){return e==="create"?d(t,n,"commit_create"):d(t,n,"commit_edit"),!1},o("Lexical").COMMAND_PRIORITY_CRITICAL))},[a,t,n]),null}l.default=m}),98);
__d("MLCInteractionInstrumentationPlugin__INTERNAL.react",["cr:3286","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return n("cr:3286")&&s.jsx(n("cr:3286"),babelHelpers.extends({},e))}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("MLCTextLengthBucket",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["S","M","L","XL"]);function l(t){return t<=500?e.S:t<=1e3?e.M:t<=2500?e.L:e.XL}i.TextLengthBucketEnum=e,i.getTextLengthBucket=l}),66);
__d("mlcInternBootstrapTypingPerformance__INTERNAL",["OneTraceQPLLogger","one-trace","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(e){switch(e.traceType){case"TYPING":return r("qpl")._(406397789,"516")}return null}function u(){e||(e=!0,r("one-trace").subscribe("trace-start",function(e){o("OneTraceQPLLogger").initQPL(s(e),e)}),r("one-trace").subscribe("trace-end",function(e){o("OneTraceQPLLogger").logQPL(s(e),e)}))}l.default=u}),98);
__d("MLCTypingPerformancePlugin__INTERNAL.react",["LexicalComposerContext","LexicalText","MLCTextLengthBucket","mlcInternBootstrapTypingPerformance__INTERNAL","one-trace","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useLayoutEffect,c=new RegExp("[^,;\\s]{200,}"),d=new RegExp("[^,;\\s]{100,199}"),m=new RegExp("[^,;\\s]{50,99}");function p(e){return e===""?0:c.test(e)?200:d.test(e)?100:m.test(e)?50:0}function _(e){return r("mlcInternBootstrapTypingPerformance__INTERNAL")(),s.jsx(f,babelHelpers.extends({},e))}_.displayName=_.name+" [from "+i.id+"]";function f(e){var t=e.format__DEPRECATED,n=e.surface,a=e.typingPerformanceID,i=a===void 0?"":a,l=o("LexicalComposerContext").useLexicalComposerContext(),s=l[0];return u(function(){var e=babelHelpers.extends({largeWord:p(s.getEditorState().read(o("LexicalText").$rootTextContent)),textLengthBucket:o("MLCTextLengthBucket").getTextLengthBucket(s.getEditorState().read(o("LexicalText").$rootTextContent).length)},n==="FeedComposerCometStatusArea"?{autolinkFastPath:String(!0)}:null),a;l();function l(){a==null||a();var o=null,l=s.registerRootListener(function(a){a!==o&&(o!==null&&r("one-trace").unregisterTypingPerf(o),a!==null&&r("one-trace").trackTypingPerf(a,n,o,babelHelpers.extends({},e,{editor:"LexicalEditor",format:t!=null?t:"",typingPerformanceID:i})),o=a)});a=function(){l(),o!==null&&r("one-trace").unregisterTypingPerf(o)}}var u=s.registerTextContentListener(function(t){var n=p(t);n!==e.largeWord&&(e.largeWord=n,l())}),c=s.registerTextContentListener(function(t){var n=o("MLCTextLengthBucket").getTextLengthBucket(t.length);n!==e.textLengthBucket&&(e.textLengthBucket=n,l())});return function(){a==null||a(),u==null||u(),c==null||c()}},[i,s,t,n]),null}f.displayName=f.name+" [from "+i.id+"]",l.default=_}),98);
__d("MLCInstrumentationPlugin__INTERNAL.react",["MLCHealthInstrumentationPlugin__INTERNAL.react","MLCInteractionInstrumentationPlugin__INTERNAL.react","MLCTypingPerformancePlugin__INTERNAL.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u="facebook",c=u;function d(e){return s.jsxs(s.Fragment,{children:[s.jsx(r("MLCTypingPerformancePlugin__INTERNAL.react"),babelHelpers.extends({},e)),s.jsx(r("MLCHealthInstrumentationPlugin__INTERNAL.react"),babelHelpers.extends({},e)),s.jsx(r("MLCInteractionInstrumentationPlugin__INTERNAL.react"),babelHelpers.extends({},e))]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAGetMediaDevicesSupportedConstraints",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){try{var t,n=(t=navigator.mediaDevices)==null?void 0:t.getSupportedConstraints();return n}catch(t){return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getSupportedConstraints is not supported in this browser. Error: ",""])),t),null}}l.getMediaDevicesSupportedConstraints=s}),98);
__d("MWPUseVoiceRecorder",["AudioContextSingleton","MWChatRecorderUtilsWorkerResource","MWPAudioPlayerIcons.react","MWPAudioPlayerLabels","Promise","WAGetMediaDevicesSupportedConstraints","WebWorker","clearTimeout","emptyFunction","getSafeQplErrorMessage","react","setTimeout","useIsMountedRef","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useReducer,_=c.useRef;function f(e){switch(e.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function g(e){switch(e.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function h(e){switch(e.stage){case"Unopen":return 0;case"Recording":return e.duration;case"Recorded":case"Playing":return Math.max(e.duration-e.currentTime,0)}}function y(e){switch(e.stage){case"Unopen":return 0;case"Recording":return e.recordingTimeout;case"Recorded":case"Playing":return e.duration}}function C(e){switch(e.stage){case"Unopen":case"Recording":return;case"Recorded":case"Playing":return e.currentTime}}function b(e){switch(e.stage){case"Unopen":case"Recorded":return!1;case"Recording":case"Playing":return!0}}function v(e){return e.stage==="Recorded"?e.currentTime===0:!1}function S(e){switch(e.stage){case"Recording":return o("MWPAudioPlayerLabels").stopLabel;case"Unopen":case"Recorded":return o("MWPAudioPlayerLabels").playLabel;case"Playing":return o("MWPAudioPlayerLabels").pauseLabel}}function R(e,t){switch(e.stage){case"Recording":return u.jsx(o("MWPAudioPlayerIcons.react").StopIcon,{color:t});case"Unopen":case"Recorded":return u.jsx(o("MWPAudioPlayerIcons.react").PlayIcon,{color:t});case"Playing":return u.jsx(o("MWPAudioPlayerIcons.react").PauseIcon,{color:t})}}R.displayName=R.name+" [from "+i.id+"]";function L(e,t){switch(t.type){case"Start":return{duration:0,mediaStream:t.mediaStream,recordingTimeout:t.recordingTimeout,stage:"Recording"};case"Toggle":{switch(e.stage){case"Unopen":return e;case"Recording":return{currentTime:0,duration:e.duration,stage:"Recorded"};case"Recorded":return{currentTime:e.currentTime,duration:e.duration,stage:"Playing"};case"Playing":return{currentTime:e.currentTime,duration:e.duration,stage:"Recorded"}}break}case"UpdateDuration":{if(e.duration!=null&&t.duration<e.duration)return e;var n=t.duration;switch(e.stage){case"Unopen":return e;case"Recording":return{duration:n,mediaStream:e.mediaStream,recordingTimeout:e.recordingTimeout,stage:"Recording"};case"Recorded":return{currentTime:e.currentTime,duration:n,stage:"Recorded"};case"Playing":return{currentTime:e.currentTime,duration:n,stage:"Playing"}}break}case"UpdateTime":{var r=t.currentTime;switch(e.stage){case"Unopen":case"Recording":return e;case"Recorded":{var o=e.duration;return r===o?{currentTime:0,duration:o,stage:"Recorded"}:{currentTime:r,duration:o,stage:"Recorded"}}case"Playing":{var a=e.duration;return r===a?{currentTime:0,duration:a,stage:"Recorded"}:{currentTime:r,duration:a,stage:"Playing"}}}break}case"RecordingTimeout":return{currentTime:0,duration:t.recordingTimeout,stage:"Recorded"};case"Reset":return{stage:"Unopen"}}}var E={stage:"Unopen"},k=1;function I(t){var a,i=t.maxDuration,l=i===void 0?60:i,s=t.logClickStartRecording,u=s===void 0?r("emptyFunction"):s,c=t.logBrowserDenyAccess,f=c===void 0?r("emptyFunction"):c,g=t.createVoiceRecordQpl,h=((a=o("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:a.sampleRate)===!0,y=p(L,E),C=y[0],b=y[1],v=r("useIsMountedRef")(),S=_(),R=_([]),I=_([]),T=_(),D=_(),x=_(),$=_(),P=_(),N=_(r("emptyFunction")),M=d(function(e){var t=e[0],n=e[1];if(v.current){var r=URL.createObjectURL(t);x.current=r;var o=new Audio(r);o.addEventListener("canplay",function(){var e;D.current=o;var r=o.duration;b({duration:r,type:"UpdateDuration"});var a={duration:r,file:t,waveformData:n};$.current=a,N.current(a),(e=P.current)==null||e.endSuccess()}),o.addEventListener("timeupdate",function(){var e,t=(e=D.current)==null?void 0:e.currentTime;t!=null&&b({currentTime:t,type:"UpdateTime"})}),o.addEventListener("durationchange",function(){var e,t=(e=D.current)==null?void 0:e.duration;t!=null&&!Number.isNaN(t)&&b({duration:t,type:"UpdateDuration"})})}},[v]),w=d(function(){S.current==null||T.current==null||T.current.postMessage({buffersL:R.current,buffersR:k===2?I.current:null,sampleRate:S.current})},[]);m(function(){if(C.stage==="Recording"){R.current=[],I.current=[];var e=r("AudioContextSingleton").get({sampleRate:h?44100:void 0}),t=e.destination;S.current=e.sampleRate;var n=C.mediaStream,o=e.createScriptProcessor(4096,k,k),a=e.createMediaStreamSource(n);T.current=new(r("WebWorker"))(r("MWChatRecorderUtilsWorkerResource")).setMessageHandler(M).setAllowCrossPageTransition(!0).execute();var i=function(t){C.stage==="Recording"&&t instanceof AudioProcessingEvent&&R.current.push(t.inputBuffer.getChannelData(0).slice())};return o.addEventListener("audioprocess",i),a.connect(o),o.connect(t),u(),function(){n.getAudioTracks().forEach(function(e){if(e.readyState!=="ended"){e.stop();return}}),o.removeEventListener("audioprocess",i)}}},[M,u,C.stage,C.mediaStream,h]);var A=r("usePrevious")(C);m(function(){(A==null?void 0:A.stage)==="Recording"&&C.stage==="Recorded"&&w()},[A==null?void 0:A.stage,w,C.stage]),m(function(){if(C.stage==="Recording"){var e=Date.now(),t,n=function(){var o=(Date.now()-e)/1e3;if(o>=l){b({recordingTimeout:l,type:"RecordingTimeout"});return}b({duration:o,type:"UpdateDuration"}),t=r("setTimeout")(n,1e3)};return t=r("setTimeout")(n,1e3),function(){t!=null&&r("clearTimeout")(t)}}},[l,C.stage]);var F=d(function(e){var t=g==null?void 0:g();P.current=t,t==null||t.start({startInfo:{isOpusRecorder:!1}}),b({mediaStream:e,recordingTimeout:l,type:"Start"})},[l,g]),O=d(function(){var e,t;(e=P.current)==null||e.endCancel(),b({type:"Reset"}),(t=D.current)==null||t.pause(),D.current=void 0,$.current=void 0,S.current=void 0;var n=x.current;n!=null&&(URL.revokeObjectURL(n),x.current=void 0)},[]),B=d(function(){var e=function(){b({maxDuration:l,type:"Toggle"})},t=D.current;if(t==null){e();return}switch(C.stage){case"Unopen":{e();break}case"Recording":{var n;(n=P.current)==null||n.addPoint("stop-recording"),e();break}case"Recorded":{var r;(r=P.current)==null||r.addPoint("play-audio"),t.play().then(e).catch(function(e){var t;(t=P.current)==null||t.endFail("browser-deny-access",{string:{failReason:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(e)}}),f()});break}case"Playing":{var a;(a=P.current)==null||a.addPoint("pause-playing"),t.pause(),e();break}}},[f,C.stage]),W=d(function(){return new(e||(e=n("Promise")))(function(e){var t=$.current;if(t!=null)return e(t);if(N.current=e,C.stage==="Recording")return B()})},[C,B]);return{audioEl:D,getVoiceClip:W,reset:O,start:F,state:C,toggle:B}}l.showScreenReaderLabel=f,l.hasScrubber=g,l.getTimerTime=h,l.getDuration=y,l.getCurrentTime=C,l.isProgressing=b,l.isCompleted=v,l.getPlaybackLabel=S,l.getPlaybackIcon=R,l.useVoiceRecorder=I}),98);