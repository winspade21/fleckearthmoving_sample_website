;/*FB_PKG_DELIM*/

__d("FDSPopoverLoadingState.react",["fbt","BasePopoverReflowSheetContext","FDSPopover.react","FDSPopoverLoadingStateContent.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["withArrow","xstyle"],u,c=u||(u=o("react")),d=u.useContext;function m(t){var n=t.withArrow,o=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=d(r("BasePopoverReflowSheetContext")),l=i.isReflowSheet;return c.jsx(r("FDSPopover.react"),babelHelpers.extends({"aria-label":s._(/*BTDS*/"Loading..."),withArrow:l?!1:n},a,{children:c.jsx(r("FDSPopoverLoadingStateContent.react"),{xstyle:o})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("MWSearchPluginUtils",["isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e==null||(n=e.split("?")[1])==null?void 0:n.split("&"))!=null?t:[];if(r.length===0)return null;var o=[],a=[],i=[],l="",s="",u="";return r.forEach(function(e){var t=e.split("="),n=t[0],r=t[1],c=decodeURIComponent(r);n.includes("source_titles")&&o.push(c.replaceAll("+"," ")),n.includes("source_sub_titles")&&a.push(c.replaceAll("+"," ")),n.includes("source_urls")&&i.push(c),n==="source_query"&&(l=r==null?"":c.replaceAll("+"," ")),n==="source_query_url"&&(s=c),n==="header"&&(u=c)}),{header:u,source_query:l,source_query_url:s,source_sub_titles:a,source_titles:o,source_urls:i}}function s(e){return!!(e.cta1Type==="xma_gen_ai_search_plugin_response_search_engine_attribution"&&e.cta2Type==="xma_gen_ai_search_plugin_response_sources"||c(e))}function u(e){return e.cta1Type==="xma_gen_ai_search_plugin_response_sources"}function c(e){return e.cta1Type==="xma_gen_ai_search_plugin_response_sources"&&r("isStringNullOrEmpty")(e.headerTitle)}l.useSearchPluginSources=e,l.isSearchPlugin=s,l.isSearchSingleBubblePlugin=u,l.isSearchPluginWithoutAttributionLink=c}),98);
__d("IGDAttachmentUtil",["fbt","I64","LSBitFlag","LSIntEnum","MNXMAPreviewImageDecorationType","MWSearchPluginUtils","MessagingAttachmentType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video","xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]);function d(e,t,n,r){return p(e)||_(t)||D(e,r)||f(e)&&n!==!0||R(e)}function m(e,t,n){var r;return p(e)?r="default_cta":_(t)?r="cta":f(e)&&!n?r="poll":e.loggingGenericXmaContentType!=null&&(r=e.loggingGenericXmaContentType),r}function p(e){return e.defaultCtaType!=null&&c.has(e.defaultCtaType)}function _(e){return e==null?!1:!!(e.type_==="xma_open_native"&&e.nativeUrl!=null&&e.nativeUrl.startsWith("instagram://"))}function f(e){return e.defaultCtaType!=null&&e.defaultCtaType==="xma_poll_details_card"}function g(t){return(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))}function h(t){return(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))}function y(t){return(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE))}function C(t){return(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO))}function b(t){return(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))}function v(t){return!!(t.attachmentType&&(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO)))}function S(e){return e.playableUrlMimeType==="image/gif"||e.stickerType==="cutout_sticker"||e.stickerType==="ai_generated_sticker"||e.stickerType==="avatar_sticker"||e.stickerType==="music_sticker"}function R(e){return e.loggingGenericXmaContentType==="quick_snap"}function L(t){return!!(t.hasXma===!0||t.attachmentType&&(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)))}function E(t){return!!(t.previewImageDecorationType&&(e||(e=o("I64"))).equal(t.previewImageDecorationType,(u||(u=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").REEL)))}function k(t){if(!t)return null;if(L(t)&&E(t))return s._(/*BTDS*/"Reel");if(L(t))return s._(/*BTDS*/"Attachment");if(t.attachmentType){var n=(e||(e=o("I64"))).to_int32(t.attachmentType);if(n===r("MessagingAttachmentType").IMAGE)return s._(/*BTDS*/"Photo");if(n===r("MessagingAttachmentType").VIDEO)return s._(/*BTDS*/"Video");if(n===r("MessagingAttachmentType").AUDIO)return s._(/*BTDS*/"Voice Message")}return null}function I(e){if(!e||v(e))return!1;var t=L(e),n=E(e);return!(t===!0&&n!==!0||e.previewUrl==null||e.previewUrl==="")}function T(t){if((e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)))return"store_sticker_rendered";switch(t.stickerType){case"avatar_sticker":return"avatar_sticker_rendered";case"cutout_sticker":return"cutout_sticker_rendered";case"ai_generated_sticker":return"ai_generated_sticker_rendered";default:return null}}function D(e,t){return t==null||o("MWSearchPluginUtils").isSearchPlugin(e)||o("MWSearchPluginUtils").isSearchSingleBubblePlugin(e)?!1:t.botResponseId!=null&&o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t.displayedContentTypes)}l.isUnsupportedXma=d,l.getUnsupportedXmaType=m,l.isUnsupportedCTA=_,l.isIGDPoll=f,l.isImageAttachment=g,l.isVideoAttachment=h,l.isEphemeralImageAttachment=y,l.isEphemeralVideoAttachment=C,l.isAnimatedImageAttachment=b,l.isAudioAttachment=v,l.isStickerXMA=S,l.isQuickSnapAttachment=R,l.isXMAAttachment=L,l.isReelAttachment=E,l.getAttachmentTypeLabel=k,l.shouldDisplayThumbnail=I,l.getStickerImpressionLoggingEventName=T}),226);
__d("IGDEditMessageContext.react",["emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.createContext,m=u.useCallback,p=u.useContext,_=u.useMemo,f=u.useState,g=d({clearEditMessageData:r("emptyFunction"),setEditMessageData:r("emptyFunction")}),h=d();function y(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=f(null),a=r[0],i=r[1],l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(){i(null)},t[0]=l):l=t[0];var s=l,u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u={clearEditMessageData:s,setEditMessageData:i},t[1]=u):u=t[1];var d=u,m;t[2]!==n?(m=c.jsx(g.Provider,{value:d,children:n}),t[2]=n,t[3]=m):m=t[3];var p;return t[4]!==a||t[5]!==m?(p=c.jsx(h.Provider,{value:a,children:m}),t[4]=a,t[5]=m,t[6]=p):p=t[6],p}function C(){return p(h)}function b(){return p(g)}l.IGDEditMessageSetterContext=g,l.IGDEditMessageContext=h,l.IGDEditMessageContextProvider=y,l.useIGDEditContext=C,l.useIGDEditSetterContext=b}),98);
__d("IGDSEmoji.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.emoji,r=e.fontSize,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a="x15yrdiy",t[0]=a):a=t[0];var i;t[1]!==r?(i=r!=null?{fontSize:r}:void 0,t[1]=r,t[2]=i):i=t[2];var l;return t[3]!==n||t[4]!==i?(l=s.jsx("span",{className:a,style:i,children:n}),t[3]=n,t[4]=i,t[5]=l):l=t[5],l}l.default=u}),98);
__d("IGDSPhotoPanoOutlineIcon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n,a,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M6.549 5.013A1.557 1.557 0 1 0 8.106 6.57a1.557 1.557 0 0 0-1.557-1.557Z",fillRule:"evenodd"}),a=s.jsx("path",{d:"m2 18.605 3.901-3.9a.908.908 0 0 1 1.284 0l2.807 2.806a.908.908 0 0 0 1.283 0l5.534-5.534a.908.908 0 0 1 1.283 0l3.905 3.905",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"}),i=s.jsx("path",{d:"M18.44 2.004A3.56 3.56 0 0 1 22 5.564h0v12.873a3.56 3.56 0 0 1-3.56 3.56H5.568a3.56 3.56 0 0 1-3.56-3.56V5.563a3.56 3.56 0 0 1 3.56-3.56Z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),t[0]=n,t[1]=a,t[2]=i):(n=t[0],a=t[1],i=t[2]);var l;return t[3]!==e?(l=s.jsxs(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:[n,a,i]})),t[3]=e,t[4]=l):l=t[4],l}var c=s.memo(u);l.default=c}),98);
__d("IGDSPhotoOutlineIcon.react",["IGDSPhotoPanoOutlineIcon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(r("IGDSPhotoPanoOutlineIcon.react"),babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}var c=s.memo(u);l.default=c}),98);
__d("LSArrayRemoveObjectAt",["I64","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a){return o("LSSynchronousPromise").makeSynchronousPromise([r.splice((e||(e=o("I64"))).to_int32(a),1)])}l.call=s}),98);
__d("LSCollapseAttachments",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.islc(t.sortBy(t.db.table(16).fetch([[[e[0],e[1]]],"idx_attachments_collapsible_id"]),[["timestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,t.sequence([function(r){return n[0]=o.messageId,t.forEach(t.db.table(16).fetch([[[e[0],e[1],{lt:n[0]}],[e[0],e[1],{gt:n[0]}]],"idx_attachments_collapsible_id"]),function(e){var n=e.item;return t.forEach(t.filter(t.db.table(12).fetch([[[n.threadKey,n.timestampMs,n.messageId]]]),function(e){return t.i64.eq(e.threadKey,n.threadKey)&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.timestampMs,n.timestampMs)&&e.messageId===n.messageId}),function(e){var t=e.update,n=e.item;return t({isCollapsed:!0})})})},function(e){return t.forEach(t.filter(t.db.table(12).fetch([[[o.threadKey,o.timestampMs,n[0]]]]),function(e){return t.i64.eq(e.threadKey,o.threadKey)&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.timestampMs,o.timestampMs)&&e.messageId===n[0]}),function(e){var t=e.update,n=e.item;return t({isCollapsed:!1})})}]))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxCollapseAttachmentsStoredProcedure",e.__tables__=["attachments","messages"],a.exports=e}),null);
__d("LSInsertNewMediaSend",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(51).add({offlineAttachmentId:e[0],offlineThreadingId:e[1],inMessageIndex:e[2],attachmentType:e[3],shouldTranscode:e[4],useDoublePhase:e[5],sendByServer:e[6],isSecure:e[7],state:e[4]?t.i64.cast([0,1]):t.i64.cast([0,3])})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMediaSendInsertNewMediaSendStoredProcedure",e.__tables__=["media_send_jobs"],a.exports=e}),null);
__d("LSInsertNewMediaSendStoredProcedure",["LSInsertNewMediaSend","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertNewMediaSend"),a.offlineAttachmentId,a.offlineThreadingId,a.inMessageIndex,a.attachmentType,a.shouldTranscode,a.useDoublePhase,a.sendByServer,a.isSecure);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSInsertRollCallContribution",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(255).fetch([[[e[0],e[1],e[2],e[3]]],"optimistic"]),function(n){return t.i64.eq(n.rollCallContributionId,e[0])&&t.i64.eq(n.rollCallId,e[1])&&n.messageId===e[2]&&t.i64.eq(n.messageTimestampMs,e[3])&&t.i64.lt(n.authorityLevel,e[23])}),function(e){return e.delete()})},function(n){return t.db.table(255).add({rollCallContributionId:e[0],rollCallId:e[1],messageId:e[2],messageTimestampMs:e[3],threadKey:e[4],primaryMediaUrl:e[5],primaryMediaUrlFallback:e[6],primaryMediaExpiryMs:e[7],primaryMediaWidth:e[8],primaryMediaHeight:e[9],primaryMediaMimeType:e[10],previewMediaUrl:e[11],previewMediaUrlFallback:e[12],previewMediaExpiryMs:e[13],previewMediaWidth:e[14],previewMediaHeight:e[15],previewMediaMimeType:e[16],authorityLevel:e[23],contributorId:e[17],offlineThreadingId:e[18],blurOverride:e[19],contributionSource:e[20],contributionType:e[21],content:e[22]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertRollCallContributionStoredProcedure",e.__tables__=["roll_call_contributions_v2"],a.exports=e}),null);
__d("LSLocalApplyOptimisticRollCallContribution",["LSArrayGetObjectAt","LSGetFirstAvailableAttachmentCTAID","LSGetViewerFBID","LSInsertAttachmentItem","LSInsertRollCallContribution","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return e[1]!==void 0?t.sequence([function(n){return t.db.table(250).fetch([[[t.i64.from_string(e[1]),e[0]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] couldn't find roll call in table roll_calls"),o=["Roll Call",t.i64.cast([0,0])],r[0]=o[0],r[1]=o[1]):(n=l.item,a=[n.rollCallPrompt,n.expiryTimestampSec],r[0]=a[0],r[1]=a[1])})},function(n){return t.islc(t.sortBy(t.filter(t.db.table(255).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.rollCallId,t.i64.from_string(e[1]))}),[["messageTimestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=void 0:(t=o.item,r[3]=t.messageId)})},function(n){return r[3]!==void 0?t.sequence([function(n){return r[7]=t.createArray(),t.forEach(t.islc(t.sortBy(t.db.table(18).fetch([[[e[0],r[3]]],"fk_attachments"]),[["attachmentIndex","ASC"]]),0,t.i64.to_float(t.i64.cast([0,2]))),function(e){var n=e.item;return r[8]=new t.Map,r[8].set("attachment_index",n.attachmentIndex),r[8].set("preview_url",n.previewUrl),r[8].set("preview_url_expiration_timestamp_ms",n.previewUrlExpirationTimestampMs),r[8].set("preview_url_mime_type",n.previewUrlMimeType),r[8].set("preview_width",n.previewWidth),r[8].set("preview_height",n.previewHeight),r[8].set("default_cta_id",n.defaultCtaId),r[8].set("playable_url",n.playableUrl),r[9]=(r[7].push(r[8]),r[7])})},function(e){return r[5]=r[7]}]):t.resolve((r[7]=t.createArray(),r[5]=r[7]))},function(o){return t.i64.neq(e[6],void 0)?r[6]=e[6]:r[6]=t.i64.cast([0,0]),t.i64.eq(r[6],t.i64.cast([0,0]))?(r[7]=t.i64.of_int32(e[2].length),t.i64.eq(r[7],t.i64.cast([0,1]))?t.sequence([function(o){return e[5]!==void 0?r[8]=t.i64.from_string(e[5]):r[8]=t.i64.cast([0,0]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3989800917]),void 0).then(function(e){return r[9]=e})},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[2],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],t})},function(e){return t.storedProcedure(n("LSGetFirstAvailableAttachmentCTAID")).then(function(e){var t;return t=e,r[12]=t[0],t})},function(n){return r[13]=r[10].get("offline_attachment_id"),r[14]=r[10].get("attachment_index"),t.filter(t.db.table(16).fetch([[[e[0],e[3],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===e[3]&&n.attachmentFbid===e[1]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[0],messageId:e[3],attachmentFbid:e[1],timestampMs:e[4],offlineAttachmentId:r[13],attachmentType:t.i64.cast([0,7]),filesize:t.i64.cast([0,0]),attachmentCta1Id:r[12],attachmentIndex:r[14],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:t.i64.cast([0,10]),cta1Title:r[9],cta1Type:"xma_disabled_cta",defaultCtaTitle:r[9],defaultCtaType:"xma_disabled_cta",defaultCtaId:r[12],titleText:r[0],authorityLevel:t.i64.cast([0,20]),countdownTimestampMs:t.i64.mul(r[1],t.i64.cast([0,1e3])),maxTitleNumOfLines:t.i64.cast([0,4])}):0})},function(e){return r[15]=r[10].get("preview_url"),r[26]=r[15]==null?"":r[15],r[16]=r[10].get("preview_url_mime_type"),r[27]=r[16]==null?"":r[16],r[17]=r[10].get("preview_height"),r[23]=r[17]==null?t.i64.cast([0,0]):r[17],r[18]=r[10].get("preview_width"),r[22]=r[18]==null?t.i64.cast([0,0]):r[18],r[19]=r[10].get("playable_url"),r[25]=r[19]==null?"":r[19],r[20]=r[10].get("playable_url_mime_type"),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[21]=t[0],t})},function(o){return t.storedProcedure(n("LSInsertRollCallContribution"),t.i64.cast([0,0]),t.i64.from_string(e[1]),e[3],e[4],e[0],r[25],"",t.i64.cast([0,0]),r[22],r[23],r[20]==null?"":r[20],r[26],"",t.i64.cast([0,0]),r[22],r[23],r[27],r[21],e[3],!1,r[8],e[6],void 0,t.i64.cast([0,20]))},function(n){return t.forEach(t.db.table(250).fetch([[[t.i64.from_string(e[1]),e[0]]]]),function(e){var t=e.update,n=e.item;return t({isBlurred:!1,viewerHasContributed:!0})})},function(o){return r[24]=r[10].get("attachment_index"),t.storedProcedure(n("LSInsertAttachmentItem"),e[1],r[24],e[0],t.i64.cast([0,0]),e[3],void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,r[25],void 0,void 0,void 0,void 0,r[26],r[26],t.i64.cast([0,0]),r[27],r[22],r[23],void 0,r[12],r[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(o){return r[28]=t.i64.of_int32(r[5].length),t.i64.gt(r[28],t.i64.cast([0,0]))?t.loopAsync(r[28],function(o){return r[29]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[29]).then(function(e){var t;return t=e,r[30]=t[0],r[31]=t[1],t})},function(o){return r[32]=r[30].get("attachment_index"),r[33]=r[30].get("preview_url"),r[34]=r[30].get("preview_url_expiration_timestamp_ms"),r[35]=r[30].get("preview_url_mime_type"),r[36]=r[30].get("preview_width"),r[37]=r[30].get("preview_height"),r[38]=r[30].get("default_cta_id"),r[39]=r[30].get("playable_url"),t.storedProcedure(n("LSInsertAttachmentItem"),e[1],t.i64.add(r[32],t.i64.cast([0,1])),e[0],t.i64.cast([0,0]),e[3],void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,r[39],void 0,void 0,void 0,void 0,r[33],r[33],r[34],r[35],r[36],r[37],void 0,r[38],r[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}])}):t.resolve()}]):t.resolve((r[8]=t.i64.of_int32(e[2].length),(function(e){t.logger(e).mustfix(e)})(["[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected only 1 attachment for MEDIA contribution, but found ",t.i64.to_string(r[8])].join(""))))):t.resolve(t.i64.eq(r[6],t.i64.cast([0,1]))?e[7]!==void 0?0:(function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected non-null content for TEXT contribution, but found null"):t.i64.eq(r[6],t.i64.cast([0,2]))?(function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] LINK contributions are not yet supported"):0)}]):t.resolve((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] param product_fbid is missing"))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure",e.__tables__=["roll_calls","roll_call_contributions_v2","attachment_items","attachments"],a.exports=e}),null);
__d("LSLocalApplyOptimisticSharedAlbumContribution",["LSArrayGetObjectAt","LSArrayRemoveObjectAt","LSCollapseAttachments","LSGetFirstAvailableAttachmentCTAID","LSInsertAttachmentItem","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2856734260]),void 0).then(function(e){return r[0]=e})},function(e){return t.storedProcedure(n("LSGetFirstAvailableAttachmentCTAID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[2],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],t})},function(o){return r[4]=t.i64.random(),r[5]=t.i64.to_string(r[4]),e[1]!==void 0?t.sequence([function(n){return t.db.table(279).fetch([[[t.i64.from_string(e[1]),e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] couldn't find album in table shared_albums"),r[6]=void 0):(n=a.item,r[6]=n.title)})},function(o){return r[6]!==void 0?t.sequence([function(n){return r[8]=r[2].get("offline_attachment_id"),r[9]=r[2].get("attachment_index"),t.filter(t.db.table(16).fetch([[[e[0],e[3],r[5]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===e[3]&&n.attachmentFbid===r[5]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[0],messageId:e[3],attachmentFbid:r[5],timestampMs:e[4],offlineAttachmentId:r[8],attachmentType:t.i64.cast([0,7]),filesize:t.i64.cast([0,0]),attachmentCta1Id:r[1],attachmentIndex:r[9],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:t.i64.cast([0,10]),cta1Title:r[0],cta1Type:"xma_disabled_cta",defaultCtaTitle:r[0],defaultCtaType:"xma_shared_album_viewer",defaultCtaId:r[1],titleText:r[6],authorityLevel:t.i64.cast([0,20]),maxTitleNumOfLines:t.i64.cast([0,4]),collapsibleId:t.i64.from_string(e[1])}):0})},function(r){return t.storedProcedure(n("LSCollapseAttachments"),e[0],t.i64.from_string(e[1]))},function(o){return r[10]=t.i64.of_int32(e[2].length),t.i64.gt(r[10],t.i64.cast([0,0]))?t.loopAsync(r[10],function(o){return r[12]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[2],r[12]).then(function(e){var t;return t=e,r[13]=t[0],r[14]=t[1],t})},function(n){return r[15]=r[13].get("preview_url"),r[23]=r[15]==null?"":r[15],r[16]=r[13].get("preview_height"),r[24]=r[16]==null?t.i64.cast([0,0]):r[16],r[17]=r[13].get("preview_width"),r[25]=r[17]==null?t.i64.cast([0,0]):r[17],r[18]=r[13].get("preview_url_mime_type"),r[19]=r[13].get("playable_url"),r[20]=r[13].get("playable_url_mime_type"),r[21]=r[13].get("preview_url_mime_type"),r[22]=r[13].get("offline_attachment_id"),r[22]!==void 0?t.sequence([function(n){return r[27]="",r[28]=t.i64.from_string(r[22]),r[29]=t.i64.from_string(e[1]),r[26]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(280).fetch([[[r[29],r[28],e[0],r[27]]]]),function(n){return t.i64.eq(n.sharedAlbumId,r[29])&&t.i64.eq(n.sharedAlbumContributionId,r[28])&&t.i64.eq(n.threadKey,e[0])&&n.messageId===r[27]&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(280).add({messageId:r[27],sharedAlbumContributionId:r[28],sharedAlbumId:r[29],threadKey:e[0],mediaUrl:r[19]==null?r[23]:r[19],mediaHeight:r[24],mediaWidth:r[25],mediaUrlFallback:"",urlExpiryMs:t.i64.cast([0,0]),creationTimestampMs:r[26],authorityLevel:t.i64.cast([0,20]),previewMediaUrl:r[23],previewMediaHeight:r[24],previewMediaWidth:r[25],previewMediaMimeType:r[18]==null?"":r[18]})}]):t.resolve((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param $attachment_otid is missing"))}])}):t.resolve()},function(o){return r[11]=t.createArray(),r[12]=(r[11].push(t.i64.cast([0,0])),r[11]),t.forEach(t.islc(t.sortBy(t.db.table(280).fetch([[[t.i64.from_string(e[1])]]]),[["creationTimestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,4]))),function(o){var a=o.item;return t.sequence([function(e){return r[15]=a.previewMediaUrl,t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[11],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(o){return t.i64.eq(t.i64.cast([0,0]),r[12])?r[14]=r[6]:r[14]=void 0,t.storedProcedure(n("LSInsertAttachmentItem"),r[5],r[12],e[0],t.i64.cast([0,0]),e[3],void 0,t.i64.cast([0,0]),void 0,r[14],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,r[15],r[15],t.i64.cast([0,0]),a.previewMediaMimeType,a.mediaWidth,a.mediaHeight,void 0,r[1],void 0,"xma_shared_album_viewer",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(e){return t.nativeTypeOperation("Array",n("LSArrayRemoveObjectAt"),r[11],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return r[16]=(r[11].push(t.i64.add(r[12],t.i64.cast([0,1]))),r[11])}])})}]):t.resolve()}]):t.resolve((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param product_fbid is missing"))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure",e.__tables__=["shared_albums","attachments","shared_album_contributions"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution","LSLocalApplyOptimisticSharedAlbumContribution","LSSetMessageDisplayedContentTypes"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticMessageV2"),e[0],e[1],e[2],e[3],e[4],e[5],void 0).then(function(e){var t;return t=e,r[0]=t[0],r[1]=t[1],t})},function(o){return r[2]=e[5].get("attachments"),r[3]=e[5].get("product_type"),r[3]==="roll_call"?(r[4]=e[5].get("product_fbid"),r[5]=e[5].get("product_attribution"),r[6]=e[5].get("contribution_type"),t.storedProcedure(n("LSLocalApplyOptimisticRollCallContribution"),e[1],r[4],r[2],r[0],r[1],r[5],r[6],e[3])):r[3]==="shared_albums"?(r[4]=e[5].get("product_fbid"),r[5]=e[5].get("product_attribution"),t.storedProcedure(n("LSLocalApplyOptimisticSharedAlbumContribution"),e[1],r[4],r[2],r[0],r[1],r[5])):(r[4]=t.i64.of_int32(r[2].length),t.i64.gt(r[4],t.i64.cast([0,0]))?t.loopAsync(r[4],function(o){return r[5]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[2],r[5]).then(function(e){var t;return t=e,r[6]=t[0],r[7]=t[1],t})},function(n){return r[8]=r[6].get("attachment_fbid"),r[9]=r[6].get("offline_attachment_id"),r[10]=r[6].get("attachment_type"),r[11]=r[6].get("filename"),r[12]=r[6].get("filesize"),r[13]=r[6].get("attachment_index"),r[14]=r[6].get("has_media"),r[15]=r[6].get("has_xma"),r[16]=r[6].get("playable_url"),r[17]=r[6].get("playable_url_mime_type"),r[18]=r[6].get("playable_duration_ms"),r[19]=r[6].get("preview_url"),r[20]=r[6].get("preview_url_mime_type"),r[21]=r[6].get("mini_preview"),r[22]=r[6].get("preview_width"),r[23]=r[6].get("preview_height"),r[24]=r[6].get("xma_layout_type"),r[25]=r[6].get("xmas_template_type"),r[26]=r[6].get("cta1_title"),r[27]=r[6].get("cta1_type"),r[28]=r[6].get("attachment_cta1_id"),r[29]=r[6].get("cta2_title"),r[30]=r[6].get("cta2_type"),r[31]=r[6].get("attachment_cta2_id"),r[32]=r[6].get("cta3_title"),r[33]=r[6].get("cta3_type"),r[34]=r[6].get("attachment_cta3_id"),r[35]=r[6].get("image_url"),r[36]=r[6].get("action_url"),r[37]=r[6].get("title_text"),r[38]=r[6].get("subtitle_text"),r[39]=r[6].get("description_text"),r[40]=r[6].get("source_text"),r[41]=r[6].get("original_file_hash"),r[42]=r[6].get("sound_bite_client_sound_key"),r[43]=r[6].get("sound_bite_visual"),r[44]=r[6].get("ephemeral_media_state"),r[45]=r[6].get("waveform_data"),r[46]=r[6].get("avatar_audio_message_animated_url"),r[47]=r[6].get("avatar_audio_message_idle_url"),r[48]=r[6].get("avatar_audio_message_animated_b_url"),r[49]=r[6].get("avatar_audio_message_idle_b_url"),r[50]=r[6].get("avatar_audio_message_background_graphics_image_url"),r[51]=r[6].get("avatar_audio_message_pose_id"),r[52]=r[6].get("sampling_frequency_hz"),r[53]=r[6].get("should_autoplay_video"),r[54]=r[6].get("has_xma_favicon"),r[55]=r[6].get("favicon_url"),r[19]!==void 0?r[56]=r[19]:r[56]=r[16],t.filter(t.db.table(16).fetch([[[e[1],r[0],r[8]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===r[0]&&n.attachmentFbid===r[8]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[1],messageId:r[0],attachmentFbid:r[8],timestampMs:r[1],offlineAttachmentId:r[9],attachmentType:r[10],filename:r[11],filesize:r[12],attachmentIndex:r[13],hasMedia:r[14],hasXma:r[15],isSharable:!1,playableUrl:r[16],playableUrlMimeType:r[17],playableDurationMs:r[18],previewUrl:r[56],previewUrlMimeType:r[20],miniPreview:r[21],previewWidth:r[22],previewHeight:r[23],xmaLayoutType:r[24],xmasTemplateType:r[25],cta1Title:r[26],cta1Type:r[27],attachmentCta1Id:r[28],cta2Title:r[29],cta2Type:r[30],attachmentCta2Id:r[31],cta3Title:r[32],cta3Type:r[33],attachmentCta3Id:r[34],imageUrl:r[35],actionUrl:r[36],titleText:r[37],subtitleText:r[38],descriptionText:r[39],sourceText:r[40],ephemeralMediaState:r[44],waveformData:r[45],samplingFrequencyHz:r[52],originalFileHash:r[41],authorityLevel:t.i64.cast([0,20]),shouldAutoplayVideo:r[53],hasXmaFavicon:r[54],faviconUrl:r[55]}):0})}])}):t.resolve())},function(o){return r[4]=t.i64.of_int32(r[2].length),t.i64.gt(r[4],t.i64.cast([0,0]))?(r[5]=e[5].get("sticker_id"),t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[0],r[1],e[3],!1,t.i64.neq(r[5],void 0))):t.resolve()},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure",["LSLocalApplyOptimisticMessageWithAttachmentsV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalApplyOptimisticMessageWithAttachmentsV2"),a.senderId,a.threadKey,a.threadType,a.text,a.snippet,a.extraSendMessageParams);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWXIconPause",["MWXSvgIcon","SVGIcon","cr:22421","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22421")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPlay",["MWXSvgIcon","SVGIcon","cr:22437","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22437")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconReplay",["MWXSvgIcon","SVGIcon","cr:22459","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22459")),r("gkx")("23219"));l.default=e}),98);
__d("MWXThreadThemeColor",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){this.color=t};function l(t){if(t!=null)return new e(t)}i.MWXThreadThemeColor=e,i.mwxThreadThemeColor=l}),66);
__d("MWXIconStrict.react",["BaseIsDecorativeContext","BaseSVGIcon.react","MWXThreadThemeColor","gkx","react","react-strict-dom","useMDSIconColors"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={backgroundEnabledMDS:{alignItems:"x6s0dn4",backgroundColor:"x1qhmfi1",borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",$$css:!0},backgroundEnabledMDSDisabled:{backgroundColor:"xwcfey6",$$css:!0},root:{display:"x1lliihq",forcedColorAdjust:"x1tzjh5l",$$css:!0},size:function(t){return[{height:t!=null?"x16ye13r":t,minWidth:t!=null?"xkj4a21":t,$$css:!0},{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t),"--x-minWidth":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}};function c(e){var t=e.backgroundEnabled,n=t===void 0?!1:t,a=e.color,i=a===void 0?"primary":a,l=e.icon,c=e.size,d=e.alt,m=e.isDecorative,p=r("useMDSIconColors")(r("gkx")("23219")),_=i instanceof o("MWXThreadThemeColor").MWXThreadThemeColor?i.color:p[i];return n!==!0?s.jsx(r("BaseIsDecorativeContext").Provider,{value:m,children:s.jsx(r("BaseSVGIcon.react"),{alt:d,color:_,icon:l.component.component,size:c,xstyle:u.root})}):s.jsx(r("BaseIsDecorativeContext").Provider,{value:m,children:s.jsx(o("react-strict-dom").html.div,{style:r("gkx")("23219")?[u.backgroundEnabledMDS,u.size(c),_==="disabled"&&u.backgroundEnabledMDSDisabled]:void 0,children:s.jsx(r("BaseSVGIcon.react"),{alt:d,color:_,icon:l.originalComponent.component,size:(r("gkx")("23219")?3/4:5/9)*c,xstyle:u.root})})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWVideoPlayerPlayButton.react",["fbt","MWXIconPause","MWXIconPlay","MWXIconReplay","MWXIconStrict.react","MWXPressable.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={buttonLarge:{height:"xdd8jsf",marginTop:"xuqeo79",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1vvjuq3",width:"xvni27",$$css:!0},buttonSmall:{height:"xxk0z11",marginTop:"x7wgvq7",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x18xomjl",width:"xvy4d1p",$$css:!0},circleButton:{backgroundColor:"x18l40ae",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",opacity:"x1hc1fzr",$$css:!0},clickable:{cursor:"x1ypdohk",$$css:!0},container:{alignItems:"x6s0dn4",display:"x78zum5",insetInlineStart:"xbudbmw",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",top:"xwa60dl",$$css:!0}};function d(e){var t=e.alt,n=e.isVisible,o=e.onClick,a=e.size,i=a===void 0?"LARGE":a,l=e.type,d=l===void 0?"PLAY":l,m;switch(d){case"PAUSE":m=r("MWXIconPause");break;case"REPLAY":m=r("MWXIconReplay");break;case"PLAY":default:m=r("MWXIconPlay");break}var p=u.jsx(r("MWXIconStrict.react"),{color:"white",icon:m,size:i==="LARGE"?24:12}),_=n?o!=null?u.jsx(r("MWXPressable.react"),{display:"inline",label:t!=null?t:s._(/*BTDS*/"Play video"),onPress:o,overlayDisabled:!0,xstyle:[c.circleButton,c.container,c.clickable,i==="LARGE"&&c.buttonLarge,i==="SMALL"&&c.buttonSmall],children:p}):u.jsx("div",babelHelpers.extends({},{0:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl"},2:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xdd8jsf xuqeo79 x14z9mp xat24cr x1vvjuq3 xvni27"},1:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p"},3:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p"}}[(i==="LARGE")<<1|(i==="SMALL")<<0],{children:p})):null;return _}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("getIsMessageTimeBelowEditThresholdOffMsys",[],(function(t,n,r,o,a,i){"use strict";var e=900;function l(t,n){var r=t/1e3,o=n/1e3,a=r-o;return a<e}i.default=l}),66);
__d("useIGDAttachmentUrl",["I64","LSMediaUrlAttachment","MAWDbMedia","MAWDbMsg","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useState;function p(e){var t=/^\d+$/;return t.test(e)}function _(t,n){var a=o("react-compiler-runtime").c(9),l=(e||(e=r("useReStore")))(),s;a[0]!==l.tables.e2ee_chunk||a[1]!==l.tables.e2ee_media||a[2]!==t||a[3]!==n?(s=function(){return o("ReQL").fromTableAscending(l.tables.e2ee_media,["msgIds","hashedPlaintextHash"]).getKeyRange(t).map(function(e){var t=o("MAWDbMsg").toMsgId(n);if(t!=null&&e.msgIds.includes(t))return o("ReQLSuspense").first(o("ReQL").fromTableAscending(l.tables.e2ee_chunk.index("hashedPlaintextHash")).getKeyRange(e.hashedPlaintextHash),i.id+":47")})},a[0]=l.tables.e2ee_chunk,a[1]=l.tables.e2ee_media,a[2]=t,a[3]=n,a[4]=s):s=a[4];var u;return a[5]!==l||a[6]!==t||a[7]!==n?(u=[l,t,n],a[5]=l,a[6]=t,a[7]=n,a[8]=u):u=a[8],o("ReQLSuspense").useFirst(s,u,i.id+":37")}function f(e,t){var n,r=o("react-compiler-runtime").c(16),a=t===void 0?!1:t,i=m(),l=i[0],u=i[1],c=(n=e.offlineAttachmentId)!=null?n:e.attachmentFbid,f;r[0]!==c?(f=p(c),r[0]=c,r[1]=f):f=r[1];var g=f,h;r[2]!==c||r[3]!==g?(h=o("MAWDbMedia").convertToMediaId64(g?(s||(s=o("I64"))).of_string(c):(s||(s=o("I64"))).zero),r[2]=c,r[3]=g,r[4]=h):h=r[4];var y=h,C=_(y,e.messageId),b,v;r[5]!==e||r[6]!==C||r[7]!==a?(b=function(){if(C==null){var t=o("LSMediaUrlAttachment").previewUrlLarge(e),n=a&&t!=null?t:o("LSMediaUrlAttachment").previewUrl(e);u(n)}},v=[e,C,a],r[5]=e,r[6]=C,r[7]=a,r[8]=b,r[9]=v):(b=r[8],v=r[9]),d(b,v);var S;r[10]!==C?(S=function(){if(C!=null){var e=URL.createObjectURL(new Blob([C.blobData],{type:C.mimetype}));return u(e),(function(){URL.revokeObjectURL(e)})}},r[10]=C,r[11]=S):S=r[11];var R;return r[12]!==e||r[13]!==C||r[14]!==a?(R=[e,C,a,u],r[12]=e,r[13]=C,r[14]=a,r[15]=R):R=r[15],d(S,R),l}function g(e){var t,n=o("react-compiler-runtime").c(14),r=m(),a=r[0],i=r[1],l=(t=e.offlineAttachmentId)!=null?t:e.attachmentFbid,u;n[0]!==l?(u=p(l),n[0]=l,n[1]=u):u=n[1];var c=u,f;n[2]!==l||n[3]!==c?(f=o("MAWDbMedia").convertToMediaId64(c?(s||(s=o("I64"))).of_string(l):(s||(s=o("I64"))).zero),n[2]=l,n[3]=c,n[4]=f):f=n[4];var g=f,h=_(g,e.messageId),y,C;n[5]!==e||n[6]!==h?(y=function(){if(h==null){var t=o("LSMediaUrlAttachment").playableUrl(e);i(t)}},C=[e,h],n[5]=e,n[6]=h,n[7]=y,n[8]=C):(y=n[7],C=n[8]),d(y,C);var b;n[9]!==h?(b=function(){if(h!=null){var e=URL.createObjectURL(new Blob([h.blobData],{type:h.mimetype}));return i(e),(function(){URL.revokeObjectURL(e)})}},n[9]=h,n[10]=b):b=n[10];var v;return n[11]!==e||n[12]!==h?(v=[e,h,i],n[11]=e,n[12]=h,n[13]=v):v=n[13],d(b,v),a}l.useIGDAttachmentPreviewUrl=f,l.useIGDAttachmentPlayableUrl=g}),98);
__d("useIGDAutoFitViewport",["PolarisUA","polarisGetAppPlatform","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t){var n=o("react-compiler-runtime").c(4),r,a;n[0]!==t||n[1]!==e?(r=function(){if(!(!c()||!e.current)){var n=e.current;if(t)n.style.height="auto",n.style.alignSelf="auto";else{var r=[],o=0,a=!1;return m(r,window,"touchstart",function(e){o=e.touches[0].clientY},!0),m(r,window,"touchmove",function(e){var t=e.touches[0].clientY,r=t-o>0;a&&(r?(n.style.alignSelf="auto",n.scrollIntoView(!0)):(n.style.alignSelf="flex-end",n.scrollIntoView(!1)))},!0),d(r,window.visualViewport,"resize",function(){a=window.innerHeight>window.visualViewport.height,a?(n.style.height=window.visualViewport.height+"px",n.style.alignSelf="flex-end",n.scrollIntoView(!1)):(n.style.height="auto",n.style.alignSelf="auto")}),(function(){for(var e of r)e()})}}},a=[t,e],n[0]=t,n[1]=e,n[2]=r,n[3]=a):(r=n[2],a=n[3]),s(r,a)}function c(){return window.visualViewport&&o("PolarisUA").isMobile()&&o("polarisGetAppPlatform").isAndroid()}function d(e,t,n,r,o){t.addEventListener(n,r,o),e.push(function(){t.removeEventListener(n,r,o!=null&&typeof o!="boolean"?o.capture:o)})}function m(e,t,n,r,o){t.addEventListener(n,r,o),e.push(function(){t.removeEventListener(n,r,o!=null&&typeof o!="boolean"?o.capture:o)})}l.useIGDAutoFitViewport=u,l.checkIGDAutoFitViewportEligibility=c}),98);