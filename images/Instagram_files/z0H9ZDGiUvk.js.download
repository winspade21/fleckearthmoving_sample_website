;/*FB_PKG_DELIM*/

__d("LSUpdateExistingMessageRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(13).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&(e[2]?t.i64.eq(n.maxTimestampMs,e[1]):t.i64.eq(n.minTimestampMs,e[1]))}).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.db.table(13).put({threadKey:r.threadKey,minTimestampMs:r.minTimestampMs,minMessageId:r.minMessageId,maxTimestampMs:r.maxTimestampMs,maxMessageId:r.maxMessageId,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:e[2]&&!e[3]?r.hasMoreBefore:!1,hasMoreAfter:e[2]&&!e[3]?!1:r.hasMoreAfter}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateExistingMessageRangeStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);