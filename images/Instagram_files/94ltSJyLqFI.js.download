;/*FB_PKG_DELIM*/

__d("PolarisCreationActionCreationSelectMedia",["PolarisCreationActionCreationSelectImage","PolarisCreationActionUpdateCreationDialogStatus","PolarisCreationActionUpdateCreationError","PolarisCreationCameraLogger","PolarisCreationStrings","nullthrows","polarisReadImageFile"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t,n){var a=e.type;if(o("polarisReadImageFile").isImage(a)){var i=n().creation.sessionId;o("PolarisCreationCameraLogger").logFeedCreationFeedGallerySelectMedia({mediaType:o("PolarisCreationCameraLogger").InstagramCameraMediaTypes.PHOTO,sessionId:r("nullthrows")(i)}),t(o("PolarisCreationActionCreationSelectImage").creationSelectImage(e))}else t(o("PolarisCreationActionUpdateCreationError").updateCreationError(new Error(o("PolarisCreationStrings").NOT_SUPPORTED_MEDIA_TEXT))),t(o("PolarisCreationActionUpdateCreationDialogStatus").updateCreationDialogStatus("error"))}}l.creationSelectMedia=e}),98);
__d("PolarisHScrollAnimationController.react",["cx","invariant","CometEventListener","PolarisEventLoop","PolarisResponsiveBlock.react","PolarisUA","joinClasses","nullthrows","polarisDebounce","react","shallowEqual"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=50,m=300,p=.75,_=30,f=20,g=30;function h(e){return Math.pow(Math.abs(e),.75)*10}var y=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$20=function(){n.setState(function(e,t){var r=t.onAnimationEnd,o=e.futureScrollLeft;return n.$21(r,e.currentScrollLeft,o),{currentScrollLeft:o,futureScrollLeft:o}})},n.$28=function(e){if(!n.isAnimated()){var t=e,o=t.deltaMode,a=t.deltaX;n.setState(function(e,t){var i=t.onUserScroll,l=e.currentScrollLeft;n.$5==null&&(n.$5=l);var s=n.$5,u=[1,16,e.outerWidth];l+=a*u[o],l=n.$17(l),n.$6!=null&&r("PolarisEventLoop").clearTimeout(n.$6),n.$6=r("PolarisEventLoop").setTimeout(n.$29,m),i!=null&&i({scrollLeft:l,scrollRight:n.$25(l)});var c=Math.abs(l-s);return c>_&&(n.$13=!0),n.$18(),{currentScrollLeft:l,futureScrollLeft:l}})}},n.$30=function(e){e.touches.length>1||n.isAnimated()?n.$7=null:(n.$7=e.touches[0].clientX,n.$8=e.touches[0].clientY,n.$12=n.state.currentScrollLeft),n.$18()},n.$31=function(e){if(!(n.$7==null||n.$8==null||n.$12==null||n.isAnimated())){var t=n.$12,r=e.touches[0].clientX-n.$7,o=e.touches[0].clientY-n.$8,a=t-r;if(a=n.$26(a),!n.$11){var i=Math.abs(r)>Math.abs(o);i&&(n.$13=!0,n.$10=window.scrollY),n.$11=!0}n.$13&&n.$10===window.scrollY&&n.setState(function(e,t){var r=t.onUserScroll;return r!=null&&r({scrollLeft:a,scrollRight:n.$25(a)}),{currentScrollLeft:a,futureScrollLeft:a}})}},n.$32=function(){n.$7!=null&&n.$29(),n.$7=null,n.$8=null,n.$11=!1},n.$29=function(){var e=n.props.onUserScrollEnd;if(e!=null){var t=n.state.currentScrollLeft;e({scrollLeft:t,scrollRight:n.$25(t)})}n.$13=!1,n.$5=null},n.$33=function(e){var t=e,r=n.state.futureScrollLeft;t.keyCode===37?n.props.snapPoints?n.scrollTo(n.$22(r)):n.scrollBy(-f):t.keyCode===39&&(n.props.snapPoints?n.scrollTo(n.$23(r)):n.scrollBy(f))},n.$34=function(e){if(n.$13&&e.cancelable)return e.preventDefault(),e.stopPropagation(),!1},n.$15=function(e,t){n.$35(n.state.innerWidth,e,t)},n.$36=function(e,t){n.$35(e,n.state.outerWidth,t)},n.$15=r("polarisDebounce")(n.$15,d,n),n.state={currentScrollLeft:0,futureScrollLeft:0,height:0,innerWidth:0,outerWidth:0},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getScrollableElement=function(){return this.$4},n.isAnimated=function(t){return t=t||this.state,t.currentScrollLeft!==t.futureScrollLeft},n.scrollTo=function(t,n){n===void 0&&(n={}),this.scrollBy(t-this.state.futureScrollLeft,n)},n.scrollBy=function(t,n){var e=this,o=n===void 0?{}:n,a=o.animated,i=a===void 0?!0:a,l=o.snap,s=l===void 0?!0:l;this.setState(function(n,o){s=s&&o.snapPoints!=null;var a=n.futureScrollLeft+t;if(s&&(a=e.$16(a)),a=e.$17(a),e.$18(),e.$9!=null&&(e.$9.remove(),e.$9=null),!i)return{currentScrollLeft:a,futureScrollLeft:a};var l=e.$19();return e.$4||u(0,51628),e.$9=r("CometEventListener").listen(e.$4,"transitionend",e.$20),e.$21(o.onAnimationStart,l,a),{currentScrollLeft:l,futureScrollLeft:a}})},n.$22=function(t){var e=this.props.snapPoints;return this.$16(t,e&&e.filter(function(e){return e<t}),[0])},n.$23=function(t){var e=this.props.snapPoints;return this.$16(t,e&&e.filter(function(e){return e>t}),[this.state.innerWidth-this.state.outerWidth])},n.$24=function(t){return Math.abs(t)>=g},n.$16=function(t,n,r){n=n||this.props.snapPoints,n!=null||u(0,51629),r=r||[0,this.state.innerWidth-this.state.outerWidth];var e=function(n){return Math.abs(n-t)},o=this.$12||0,a=this.$24(e(o)),i=o<t&&a,l=o>t&&a,s=1/0,c=n.concat(r);for(var d of c)i&&d<=o||l&&d>=o||e(d)<e(s)&&(s=d);return s===1/0?o:s},n.$19=function(){if(!this.$4)return this.state.currentScrollLeft;var e=window.getComputedStyle(this.$4),t=e.transform||e.webkitTransform;if(!t)return this.state.currentScrollLeft;var n=window.WebKitCSSMatrix||window.MSCSSMatrix;if(n){var r=new n(t);return-r.m41}return this.state.currentScrollLeft},n.$21=function(t,n,r){t!=null&&t({from:{scrollLeft:n,scrollRight:this.$25(n)},to:{scrollLeft:r,scrollRight:this.$25(r)}})},n.$25=function(t,n,r){return r=r||this.state.outerWidth,n=Math.max(r,n||this.state.innerWidth),n-r-t},n.$17=function(t,n,r){return r=r||this.state.outerWidth,n=Math.max(r,n||this.state.innerWidth),Math.min(n-r,Math.max(0,t))},n.$26=function(t){var e=this.$25(t);if(t<0)return-Math.pow(-t,p);if(e<0){var n=-Math.pow(-e,p);return t-(n-e)}return t},n.$27=function(t){var e=Math.min(t.currentScrollLeft,t.futureScrollLeft),n=Math.max(t.currentScrollLeft,t.futureScrollLeft)+t.outerWidth;return{bottom:t.height,height:t.height,left:e,right:n,top:0,width:n-e}},n.$35=function(t,n,r){var e=this;this.$1&&this.setState(function(o,a){var i=a.onResize,l=e.$17(o.futureScrollLeft,t,n),s=e.$25(l,t,n);return i&&i({scrollLeft:l,scrollRight:s}),{currentScrollLeft:l,futureScrollLeft:l,height:r,innerWidth:t,outerWidth:n}})},n.$37=function(t,n){var e=t.onVisibilityChange;if(e!=null){var o=this.$27(n);r("shallowEqual")(this.$14,o)||(e(o),this.$14=o)}},n.$18=function(){var e=this.$3;e&&(e.scrollLeft=0)},n.render=function(){var e=this,t=this.props,n=t.children,o=t.className;return c.jsx(r("PolarisResponsiveBlock.react"),{className:r("joinClasses")(o,"_adc-"),onResize:this.$15,ref:function(n){return e.$3=n},children:c.jsx("div",{className:"_adc_",onTouchEnd:this.$32,onTouchMove:this.$31,onTouchStart:this.$30,ref:function(n){return e.$4=n},tabIndex:0,children:c.jsx(r("PolarisResponsiveBlock.react"),{className:"_add0",onResize:this.$36,children:n})})})},n.componentDidUpdate=function(t,n){var e=this;this.$37(this.props,this.state);var o=r("nullthrows")(this.$4),a=this.state,i=a.currentScrollLeft,l=a.futureScrollLeft,s=l-i,u=this.props.getAnimationDuration(s);if(u=Math.max(u,1),o.style.transitionDuration=(this.isAnimated()?u/1e3:0)+"s",this.isAnimated()===this.isAnimated(n)){var c="translateX("+-this.state.futureScrollLeft+"px)";o.style.webkitTransform=c,o.style.transform=c;return}window.requestAnimationFrame(function(){o.offsetHeight;var t="translateX("+-e.state.futureScrollLeft+"px)";o.style.webkitTransform=t,o.style.transform=t})},n.componentDidMount=function(){var e=r("nullthrows")(this.$4);this.$1=!0,this.$37(this.props,this.state),o("PolarisUA").isDesktop()&&(e.addEventListener("wheel",this.$28),document.addEventListener("wheel",this.$34)),document.addEventListener("touchmove",this.$34),e.addEventListener("keydown",this.$33),e.addEventListener("touchforcechange",this.$34)},n.componentWillUnmount=function(){var e=r("nullthrows")(this.$4);this.$1=!1,o("PolarisUA").isDesktop()&&(e.removeEventListener("wheel",this.$28),document.removeEventListener("wheel",this.$34)),document.removeEventListener("touchmove",this.$34),e.removeEventListener("keydown",this.$33),e.removeEventListener("touchforcechange",this.$34),this.$6&&r("PolarisEventLoop").clearTimeout(this.$6),this.$9!=null&&(this.$9.remove(),this.$9=null),this.$2&&this.$2()},t})(c.PureComponent);y.defaultProps={getAnimationDuration:h},l.default=y}),98);
__d("PolarisHScrollContainer.react",["cx","invariant","ExecutionEnvironment","PolarisHScrollAnimationController.react","PolarisPagerButton.react","joinClasses","react"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=c||(c=o("react")),m=(function(t){function n(e){var n;return n=t.call(this,e)||this,n.$1=d.createRef(),n.$4=function(){n.$3(!1)},n.$5=function(){n.$3(!0)},n.$6=function(e){n.$7(e),n.props.onResize&&n.props.onResize(e)},n.$8=function(e){n.props.onLogEvent!=null&&n.props.onLogEvent({source:"hscroll",type:"scroll"}),n.$7(e)},n.$9=function(e){n.$2!=null&&n.props.snapPoints!=null&&n.$2.scrollBy(0)},n.$10=function(e){n.$7(e.to)},n.state={leftPagerEnabled:!1,rightPagerEnabled:!1},n}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.getClickScrollIncrement=function(){if(this.$2!=null||u(0,63797),this.props.clickScrollIncrement!=null)return this.props.clickScrollIncrement;var e=this.$2.getScrollableElement();return e!=null||u(0,63798),e.offsetWidth},a.getContainerElement=function(){return this.$1.current},a.$3=function(t){this.props.onLogEvent!=null&&this.props.onLogEvent({source:"hscroll",type:"click"});var e=this.getClickScrollIncrement();this.$2!=null&&this.$2.scrollBy(t?e:-e)},a.scrollToNext=function(){this.$5()},a.$7=function(t){var e=t.scrollLeft,n=t.scrollRight;this.setState({leftPagerEnabled:e>0,rightPagerEnabled:n>0})},a.render=function(){var t=this,n=this.props,a=n.children,i=n.className,l=n.disablePagerButtons,s=n.getAnimationDuration,u=n.onVisibilityChange,c=n.snapPoints;return(e||(e=r("ExecutionEnvironment"))).canUseDOM?d.jsxs("div",{className:r("joinClasses")(i,"_adl6"),ref:this.$1,children:[d.jsx(r("PolarisHScrollAnimationController.react"),{getAnimationDuration:s,onAnimationStart:this.$10,onResize:this.$6,onUserScroll:this.$8,onUserScrollEnd:this.$9,onVisibilityChange:u,ref:function(n){return t.$2=n},snapPoints:c,children:a}),d.jsx(o("PolarisPagerButton.react").PagerButton,{direction:o("PolarisPagerButton.react").PAGER_BUTTON_DIRECTIONS.previous,enabled:this.state.leftPagerEnabled&&!l,onClick:this.$4,variant:this.props.pagerVariant}),d.jsx(o("PolarisPagerButton.react").PagerButton,{direction:o("PolarisPagerButton.react").PAGER_BUTTON_DIRECTIONS.next,enabled:this.state.rightPagerEnabled&&!l,onClick:this.$5,variant:this.props.pagerVariant})]}):d.jsx("div",{className:r("joinClasses")(i,"_adl5"),ref:this.$1,children:a})},n})(d.PureComponent);l.default=m}),98);
__d("PolarisStoryCreationFileForm.react",["PolarisImageFileForm.react","PolarisMediaHelpers","PolarisReactRedux.react","PolarisStoryCreationActions","nullthrows","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,t.handleStoryCreationClick=function(){t.$2!==!0&&(t.$2=!0,t.props.onStartStoryCreation(t.props.entryPoint).then(function(){r("nullthrows")(t.$1).selectFile(),t.$2=!1}).catch(function(){t.$2=!1}))},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=this;return s.jsx(o("PolarisImageFileForm.react").ImageFileForm,{acceptMimeTypes:Object.keys(o("PolarisMediaHelpers").IMAGE_MIME_TYPES),onFileChange:this.props.onMediaSelect,ref:function(n){return e.$1=n}})},t})(s.Component);function c(e){return{onMediaSelect:function(n){n.length&&e(o("PolarisStoryCreationActions").storyCreationSelectMedia(n[0]))},onStartStoryCreation:function(n){return e(o("PolarisStoryCreationActions").startStoryCreationSession(n))}}}var d=o("PolarisReactRedux.react").connect(null,c,null,{forwardRef:!0})(u);l.default=d}),98);