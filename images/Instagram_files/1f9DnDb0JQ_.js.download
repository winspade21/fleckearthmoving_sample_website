;/*FB_PKG_DELIM*/

__d("BotFeedbackKind",[],(function(t,n,r,o,a,i){var e=Object.freeze({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9,BOT_FEEDBACK_NEGATIVE_PERSONALIZED:10,BOT_FEEDBACK_NEGATIVE_CLARITY:11,BOT_FEEDBACK_NEGATIVE_DOESNT_LOOK_LIKE_THE_PERSON:12,BOT_FEEDBACK_NEGATIVE_HALLUCINATION_INTERNAL_ONLY:13,BOT_FEEDBACK_NEGATIVE:14,BOT_FEEDBACK_NEGATIVE_DONT_SHOW_AGAIN:15,BOT_FEEDBACK_NEGATIVE_INCORRECT_OWNERSHIP:16,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_RESPONSE:17,BOT_FEEDBACK_NEGATIVE_TOO_REPETITIVE:18});i.default=e}),66);
__d("GetPreviewDimension",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){return new(e||(e=n("Promise")))(function(e){var n=new Image;n.onload=function(){return e({previewHeight:n.height,previewWidth:n.width})},n.onerror=function(){return e()},n.src=t})}function s(t){return new(e||(e=n("Promise")))(function(e){var n=document.createElement("video");n.onloadedmetadata=function(){return e({previewHeight:n.videoHeight,previewWidth:n.videoWidth})},n.onerror=function(){return e()},n.src=t})}i.getPreviewDimensions=l,i.getVideoPreviewDimensions=s}),66);
__d("IGDMessageButton.react",["IGDSIconButton.react","IGDSTooltip.react","PolarisIGCorePressable.react","PolarisUA","react","react-compiler-runtime","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l){"use strict";var e=["label","xstyle"],s,u=s||(s=o("react")),c=s.useState,d={button:{opacity:"x15vok9n",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},buttonWithHover:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xxk0z11",opacity:"x1hc1fzr",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(20),a,i,l;n[0]!==t?(a=t.label,l=t.xstyle,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s=c(!1),m=s[0],_=s[1],f;n[4]!==l?(f=[d.button,d.buttonWithHover,l],n[4]=l,n[5]=f):f=n[5];var g;n[6]!==i||n[7]!==f?(g=u.jsx(r("IGDSIconButton.react"),babelHelpers.extends({},i,{xstyle:f})),n[6]=i,n[7]=f,n[8]=g):g=n[8];var h=g,y=r("useCurrentDisplayMode")(),C=y==="dark",b=C?"primary":"black",v;n[9]!==m?(v=o("PolarisUA").isMobile()?!1:m,n[9]=m,n[10]=v):v=n[10];var S,R;n[11]===Symbol.for("react.memo_cache_sentinel")?(S=function(){_(!0)},R=function(){_(!1)},n[11]=S,n[12]=R):(S=n[11],R=n[12]);var L;n[13]!==h?(L=u.jsx(r("PolarisIGCorePressable.react"),{onMouseEnter:S,onMouseLeave:R,onPress:p,children:h}),n[13]=h,n[14]=L):L=n[14];var E;return n[15]!==a||n[16]!==b||n[17]!==v||n[18]!==L?(E=u.jsx(r("IGDSTooltip.react"),{align:"middle",color:b,isVisible:v,position:"auto",tooltip:a,children:L}),n[15]=a,n[16]=b,n[17]=v,n[18]=L,n[19]=E):E=n[19],E}function p(){}l.default=m}),98);
__d("IGDMessageContextMenuItem.react",["IGDSContextMenuItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={container:{paddingBottom:"xwib8y2",paddingInlineEnd:"xf159sx",paddingInlineStart:"xmzvs34",paddingTop:"x1y1aw1k",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(10),n=e.delimiter,r=e.icon,a=e.label,i=e.labelProps,l=e.onClick,c=e.onHoverIn,d=e.onHoverOut,m=e.onPressIn,p=e.testid,_;return t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==c||t[6]!==d||t[7]!==m||t[8]!==p?(_=s.jsx(o("IGDSContextMenuItem.react").IGDSContextMenuItem,{addOnEnd:r,delimiter:n,onHoverIn:c,onHoverOut:d,onPress:l,onPressIn:m,testid:void 0,title:a,titleProps:i,xstyle:u.container}),t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=l,t[5]=c,t[6]=d,t[7]=m,t[8]=p,t[9]=_):_=t[9],_}l.default=c}),98);
__d("IGDMessageReactionTrayButtonLazyLoadPopoverTrigger.react",["IGDMessageButton.react","IGDMessageContextMenuItem.react","IGDSBox.react","IGDSFace2OutlineIcon.react","IGDSLazyPopoverTrigger.react","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("requireDeferred")("IGDReactionTray.react").__setRef("IGDMessageReactionTrayButtonLazyLoadPopoverTrigger.react");function c(e){var t=o("react-compiler-runtime").c(14),n=e.align,a=e.altLabel,i=e.label,l=e.onClickAction,c=e.onClose,d=e.onSelect,m=e.onVisibilityChange,p=e.selectedReaction,_=e.useMenuItem,f=_===void 0?!1:_,g;t[0]!==c||t[1]!==d||t[2]!==p?(g={onClose:c,onSelect:d,selectedReaction:p},t[0]=c,t[1]=d,t[2]=p,t[3]=g):g=t[3];var h;t[4]!==a||t[5]!==i||t[6]!==l||t[7]!==f?(h=function(t,n){return f?s.jsx(r("IGDSBox.react"),{containerRef:t,children:s.jsx(r("IGDMessageContextMenuItem.react"),{icon:s.jsx(r("IGDSFace2OutlineIcon.react"),{alt:a,size:18}),label:i,onClick:function(){return l(n)}})}):s.jsx(r("IGDMessageButton.react"),{"data-testid":void 0,innerRef:t,label:i,onClick:function(){return l(n)},children:s.jsx(r("IGDSFace2OutlineIcon.react"),{alt:a,color:"ig-primary-text","data-testid":void 0,size:16})})},t[4]=a,t[5]=i,t[6]=l,t[7]=f,t[8]=h):h=t[8];var y;return t[9]!==n||t[10]!==m||t[11]!==g||t[12]!==h?(y=s.jsx(r("IGDSLazyPopoverTrigger.react"),{align:n,onVisibilityChange:m,popoverProps:g,popoverResource:u,position:"above",children:h}),t[9]=n,t[10]=m,t[11]=g,t[12]=h,t[13]=y):y=t[13],y}l.default=c}),98);
__d("IGDSErrorOutlineIcon.react",["IGDSErrorPanoOutlineIcon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(r("IGDSErrorPanoOutlineIcon.react"),babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}var c=s.memo(u);l.default=c}),98);
__d("IGDSReplyPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M14 8.999H4.413l5.294-5.292a1 1 0 1 0-1.414-1.414l-7 6.998c-.014.014-.019.033-.032.048A.933.933 0 0 0 1 9.998V10c0 .027.013.05.015.076a.907.907 0 0 0 .282.634l6.996 6.998a1 1 0 0 0 1.414-1.414L4.415 11H14a7.008 7.008 0 0 1 7 7v3.006a1 1 0 0 0 2 0V18a9.01 9.01 0 0 0-9-9Z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:n})),t[1]=e,t[2]=a):a=t[2],a}var c=s.memo(u);l.default=c}),98);
__d("IGDSThumbDownPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M10.47 23a2 2 0 0 1-1.68-.91c-.783-1.201-2.55-4.045-3.84-6.121a242.263 242.263 0 0 0-1.429-2.29c-1.493-2.29-1.888-4.62-1.173-6.927C3.398 3.365 6.715 1 10.414 1h6.442a4.02 4.02 0 0 1 3.96 3.435l1.141 6.98A4.002 4.002 0 0 1 17.999 16h-5.093l.727 2.087a3.693 3.693 0 0 1-.264 3.063 3.697 3.697 0 0 1-2.496 1.809c-.135.027-.27.04-.403.04Zm-.005-2.003.015.002a1.701 1.701 0 0 0 1.267-2.244l-1.191-3.427A.998.998 0 0 1 11.5 14h6.499a2.001 2.001 0 0 0 1.98-2.283l-1.14-6.98A2.014 2.014 0 0 0 16.856 3h-6.442C7.582 3 5.051 4.786 4.258 7.344c-.537 1.735-.23 3.45.94 5.242.143.22.718 1.146 1.451 2.327 1.285 2.068 3.044 4.901 3.816 6.084Z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:n})),t[1]=e,t[2]=a):a=t[2],a}var c=s.memo(u);l.default=c}),98);
__d("IGDSThumbUpPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M16.856 23h-6.442c-3.7 0-7.017-2.365-8.066-5.752-.715-2.308-.32-4.638 1.173-6.928.142-.216.708-1.127 1.43-2.289 1.29-2.076 3.056-4.92 3.838-6.12a1.997 1.997 0 0 1 2.084-.871 3.703 3.703 0 0 1 2.757 4.883L12.906 8H18a4.002 4.002 0 0 1 3.961 4.566l-1.147 7.019C20.537 21.523 18.834 23 16.856 23ZM10.473 3c-.006 0-.008.002-.008.004-.772 1.182-2.531 4.015-3.816 6.083a266.26 266.26 0 0 1-1.452 2.326c-1.17 1.793-1.476 3.508-.94 5.243C5.052 19.214 7.583 21 10.415 21h6.442c.99 0 1.84-.738 1.98-1.718l1.146-7.018A2.001 2.001 0 0 0 18 10h-6.5a.998.998 0 0 1-.944-1.328l1.188-3.416A1.701 1.701 0 0 0 10.48 3h-.007Z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:n})),t[1]=e,t[2]=a):a=t[2],a}var c=s.memo(u);l.default=c}),98);
__d("LSDeleteReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(8).fetch([[[e[0],e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]&&t.i64.eq(n.actorId,e[2])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SUBMITTED:1});i.default=e}),66);
__d("LSOptimisticUpsertReaction",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[21]=n.syncGroup,t.i64.neq(r[21],void 0)?r[20]=r[21]:r[20]=t.i64.cast([0,1]),r[0]=r[20])})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("timestamp_ms",e[1]),r[2].set("message_id",e[2]),r[2].set("actor_id",e[3]),r[2].set("reaction",e[4]),r[2].set("reaction_style",void 0),r[2].set("sync_group",r[0]),r[3]=t.createArray(),r[4]=(r[3].push("reaction"),r[3]),r[5]=r[2].get("message_id"),r[6]=(r[3].push(r[5]),r[3]),r[7]=t.toJSON(r[3]),t.storedProcedure(n("LSCancelTaskByQueueName"),r[7],t.i64.cast([0,29]))},function(o){return e[4]===""?t.sequence([function(r){return t.storedProcedure(n("LSDeleteReaction"),e[0],e[2],e[3])},function(e){return r[8]=void 0}]):t.sequence([function(o){return e[4]==="\u2764\uFE0F"||e[4]==="\u2764\uFE0F"?r[20]="\u2764":r[20]=e[4],t.storedProcedure(n("LSUpsertReaction"),e[0],e[1],e[2],e[3],r[20],t.i64.cast([0,20]),void 0)},function(e){return r[8]=void 0}])},function(n){return r[9]=!0,r[9]?r[10]=void 0:(r[20]=new t.Map,r[20].set("feature_tags",void 0),r[21]=new t.Map,r[21].set("logging_metadata",r[20]),r[22]=t.toJSON(r[21]),r[10]=r[22]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[11]=t.i64.cast([0,1]):(n=a.item,r[21]=n.syncGroup,t.i64.neq(r[21],void 0)?r[20]=r[21]:r[20]=t.i64.cast([0,1]),r[11]=r[20])})},function(o){return r[13]=new t.Map,r[13].set("thread_key",e[0]),r[13].set("timestamp_ms",e[1]),r[13].set("message_id",e[2]),r[13].set("actor_id",e[3]),r[13].set("reaction",e[4]),r[13].set("reaction_style",void 0),r[13].set("sync_group",r[11]),r[13].set("send_attribution",e[5]),r[13].set("dataclass_params",r[10]),r[13].set("attachment_fbid",void 0),r[14]=t.createArray(),r[15]=(r[14].push("reaction"),r[14]),r[16]=r[13].get("message_id"),r[17]=(r[14].push(r[16]),r[14]),r[18]=t.toJSON(r[14]),r[19]=t.toJSON(r[13]),t.storedProcedure(n("LSIssueNewTask"),r[18],t.i64.cast([0,29]),r[19],void 0,void 0,e[6]==null?t.i64.cast([0,0]):e[6],t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticUpsertReaction"),a.threadKey,a.timestampMs,a.messageId,a.actorId,a.reaction,a.sendAttribution,a.pluginType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateOrInsertReactionV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(226).fetch([[[e[0],e[1],e[2]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?t.db.table(12).fetch([[[e[1]]],"messageId"]).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.sequence([function(n){return t.forEach(t.filter(t.db.table(226).fetch([[[e[0],e[1],e[2]]],"optimistic"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]&&t.i64.eq(n.reactionFbid,e[2])&&t.i64.lt(n.authorityLevel,e[5])}),function(e){return e.delete()})},function(n){return t.db.table(226).add({messageId:e[1],threadKey:e[0],reactionFbid:e[2],messageTimestamp:r.timestampMs,authorityLevel:e[5],count:e[4],viewerIsReactor:e[6],viewerReactionTimestampMs:e[7],lastUpdatedTimestampMs:e[8]})}]))}):(o=i.item,n[2]=o.lastUpdatedTimestampMs,n[1]=o.authorityLevel,t.i64.eq(e[5],t.i64.cast([0,20]))||t.i64.eq(n[1],t.i64.cast([0,80]))&&t.i64.eq(e[5],t.i64.cast([0,80]))||t.i64.eq(n[1],t.i64.cast([0,20]))&&t.i64.eq(e[5],t.i64.cast([0,80]))&&t.i64.le(t.i64.add(n[2],t.i64.cast([0,2e3])),e[8])||t.i64.eq(n[1],t.i64.cast([0,20]))&&t.i64.eq(e[5],t.i64.cast([0,60]))||t.i64.eq(n[1],t.i64.cast([0,60]))&&t.i64.eq(e[5],t.i64.cast([0,80]))&&t.i64.le(n[2],e[8])?n[3]=!0:n[3]=!1,n[3]?t.db.table(226).put({messageId:e[1],threadKey:e[0],reactionFbid:e[2],messageTimestamp:o.messageTimestamp,reactionLiteral:e[3],count:e[4],authorityLevel:e[5],viewerIsReactor:e[6],viewerReactionTimestampMs:t.i64.cast([0,0]),lastUpdatedTimestampMs:e[8]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertReactionV2StoredProcedure",e.__tables__=["reactions_v2","messages"],a.exports=e}),null);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.i64.eq(e[8],t.i64.cast([0,2]))?t.sequence([function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[16]=t.i64.cast([0,1]):(n=a.item,r[25]=n.syncGroup,t.i64.neq(r[25],void 0)?r[24]=r[25]:r[24]=t.i64.cast([0,1]),r[16]=r[24])})},function(o){return r[18]=new t.Map,r[18].set("thread_id",e[1]),r[18].set("message_id",e[2]),r[18].set("message_timestamp",e[3]),r[18].set("actor_id",e[0]),r[18].set("reaction_fbid",e[4]),r[18].set("reaction_style",e[7]),r[18].set("operation",e[8]),r[18].set("viewer_is_reactor",e[6]),r[18].set("current_count",e[5]),r[18].set("reaction_literal",e[9]),r[18].set("sync_group",r[16]),r[19]=t.createArray(),r[20]=(r[19].push("reaction_v2"),r[19]),r[21]=r[18].get("message_id"),r[22]=(r[19].push(r[21]),r[19]),r[23]=t.toJSON(r[19]),t.storedProcedure(n("LSCancelTaskByQueueName"),r[23],t.i64.cast([0,604]))}]):t.resolve()},function(o){return[t.i64.cast([0,2]),t.i64.cast([0,3])].some(function(n){return t.i64.eq(e[8],n)})?r[0]=t.i64.add(e[5],t.i64.cast([-1,4294967295])):r[0]=t.i64.add(e[5],t.i64.cast([0,1])),[t.i64.cast([0,2]),t.i64.cast([0,3])].some(function(n){return t.i64.eq(e[8],n)})?r[1]=!1:r[1]=!0,r[2]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSUpdateOrInsertReactionV2"),e[1],e[2],e[4],e[9],r[0],t.i64.cast([0,20]),r[1],t.i64.cast([0,0]),r[2])},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=void 0:(t=o.item,r[3]=t.threadType)})},function(o){return t.i64.neq(r[3],t.i64.cast([0,23]))?[t.i64.cast([0,2]),t.i64.cast([0,3])].some(function(n){return t.i64.eq(e[8],n)})?t.i64.eq(e[8],t.i64.cast([0,2]))?t.storedProcedure(n("LSDeleteReaction"),e[1],e[2],e[0]):t.sequence([function(n){return t.filter(t.db.table(8).fetch([[[e[1],e[2],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===e[2]&&t.i64.eq(n.actorId,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[16]=void 0:(t=o.item,r[16]=t.reaction)})},function(o){return e[9]!==void 0?(e[9]==="\u2764\uFE0F"||e[9]==="\u2764\uFE0F"?r[18]="\u2764":r[18]=e[9],r[18]===r[16]?t.storedProcedure(n("LSDeleteReaction"),e[1],e[2],e[0]):t.resolve()):t.resolve()}]):e[9]!==void 0?(e[9]==="\u2764\uFE0F"||e[9]==="\u2764\uFE0F"?r[16]="\u2764":r[16]=e[9],r[17]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSUpsertReaction"),e[1],e[3],e[2],e[0],r[16],t.i64.cast([0,20]),r[17])):t.resolve():t.resolve()},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[5]=t.i64.cast([0,1]):(n=a.item,r[17]=n.syncGroup,t.i64.neq(r[17],void 0)?r[16]=r[17]:r[16]=t.i64.cast([0,1]),r[5]=r[16])})},function(n){return r[7]=new t.Map,r[7].set("thread_id",e[1]),r[7].set("message_id",e[2]),r[7].set("message_timestamp",e[3]),r[7].set("actor_id",e[0]),r[7].set("reaction_fbid",e[4]),r[7].set("reaction_style",e[7]),r[7].set("current_count",e[5]),r[7].set("viewer_is_reactor",e[6]),r[7].set("operation",e[8]),r[7].set("reaction_literal",e[9]),r[7].set("entry_point",void 0),r[7].set("sync_group",r[5]),t.db.table(9).fetch([[[e[1]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?r[8]=!1:(o=i.item,t.sequence([function(n){return t.filter(t.db.table(14).fetch([[[o.threadKey,e[0]]]]),function(n){return t.i64.eq(n.threadKey,o.threadKey)&&t.i64.eq(t.i64.cast([0,0]),o.mailboxType)&&t.i64.eq(n.contactId,e[0])}).next().then(function(e,n){var a=e.done,i=e.value;return a?r[16]=!1:(n=i.item,t.i64.eq(o.threadType,t.i64.cast([0,152]))?(r[19]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,11]))?r[20]=!1:r[20]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[19]),t.i64.cast([0,0])),r[21]=o.capabilities,r[22]=o.capabilities2,r[23]=o.capabilities3,r[24]=o.capabilities4,r[25]=o.capabilities5,r[27]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[28]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[27],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,304]))?r[26]=!1:(t.i64.eq(r[27],t.i64.cast([0,0]))?r[29]=!t.i64.eq(t.i64.and_(r[28],r[21]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,1]))?r[30]=!t.i64.eq(t.i64.and_(r[28],r[22]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,2]))?r[31]=!t.i64.eq(t.i64.and_(r[28],r[23]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,3]))?r[32]=!t.i64.eq(t.i64.and_(r[28],r[24]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,4]))?r[33]=!t.i64.eq(t.i64.and_(r[28],r[25]),t.i64.cast([0,0])):r[33]=!1,r[32]=r[33]),r[31]=r[32]),r[30]=r[31]),r[29]=r[30]),r[26]=r[29]),r[20]!==r[26]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[18]=r[20]):r[18]=!1,r[16]=r[18])})},function(e){return r[8]=r[16]}]))})},function(e){return r[8]&&r[7].set("perform_action_as_page",!0),r[10]=t.createArray(),r[11]=(r[10].push("reaction_v2"),r[10]),r[12]=r[7].get("message_id"),r[13]=(r[10].push(r[12]),r[10]),r[14]=t.toJSON(r[10]),r[15]=t.toJSON(r[7]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),r[14],t.i64.cast([0,604]),r[15],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure",e.__tables__=["threads","reactions","participants"],a.exports=e}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticUpsertReactionV2"),a.actorId,a.threadId,a.messageId,a.messageTimestamp,a.reactionFbid,a.currentCount,a.viewerIsReactor,a.reactionStyle,a.operation,a.reactionLiteral);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("bot_feedback_kind",e[0]),r[0].set("bot_response_id",e[2]),r[0].set("feedback_kind_type",e[0]),r[0].set("bot_id",e[3]),r[0].set("message_id",e[4]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",t.i64.cast([0,756]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(n){return t.db.table(315).fetch([[[e[2]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,0]):(n=a.item,r[2]=n.feedbackSubmissionStatus)})},function(n){return t.i64.eq(r[2],t.i64.cast([0,0]))?t.db.table(315).add({botResponseId:e[2],feedbackSubmissionStatus:t.i64.cast([0,1]),feedbackKindType:e[0]}):t.forEach(t.db.table(315).fetch([[[e[2]]]]),function(n){var r=n.update,o=n.item;return r({feedbackSubmissionStatus:t.i64.cast([0,1]),feedbackKindType:e[0]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure",e.__tables__=["ai_bot_feedback_submission_status"],a.exports=e}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSubmitGenAIBotFeedback"),a.botFeedbackKind,a.feedbackKindType,a.botResponseId,a.botId,a.messageId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSThreadAttributionStore",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;function u(e,t){var n,r,o=(n=(r=s.get(t))!=null?r:e)!=null?n:{type:"MWLSEntrypoint",value:"unknown"};return s.delete(t),o}function c(e,t){var n,r,o=(n=(r=s.get(t))!=null?r:e)!=null?n:{type:"MWLSEntrypoint",value:"unknown"};return o}function d(e,t){s.set(e,{type:"MWLSEntrypoint",value:t})}function m(t,n){var r=(e||(e=o("I64"))).of_string(n);s.set(t,{type:"LSThreadAttribution",value:r})}function p(e){s.set("",{type:"MWLSEntrypoint",value:e})}function _(){var e=s.get("");return e==null||e.type==="LSThreadAttribution"?"unknown":e.value}l.getSourceAndResetAttribution=u,l.getSourceWithoutReset=c,l.setSource=d,l.setLSMessagingThreadAttribution=m,l.setSourceForNewThread=p,l.getSourceForNewThread=_}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var r=o("LSThreadAttributionStore").getSourceWithoutReset({type:"MWLSEntrypoint",value:n},(e||(e=o("I64"))).to_string(t));return d(r)}function c(t,n){var r=o("LSThreadAttributionStore").getSourceAndResetAttribution({type:"MWLSEntrypoint",value:n},(e||(e=o("I64"))).to_string(t));return d(r)}function d(e){if(e.type==="LSThreadAttribution")return e.value;var t=e.value;return t==="inboxPendingRequests"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS):t==="fullscreenChat"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT):t==="sidebarGroupsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS):t==="jewel"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST):t==="shop"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON):t==="chatheadsOverflow"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW):t==="hovercard"||t==="feedDynamicHoverCard"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD):t==="search"||t==="messengerUniversalSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH):t==="story"||t==="storyAggregatedUsers"||t==="storySeenByList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_STORY):t==="feedOrganicPost"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST):t==="timeline"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PROFILE_MESSAGE_BUTTON):t==="pageAboutCard"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD):t==="inboxInThread"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD):t==="notificationInThreadReply"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY):t==="archieve"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS):t==="storyViewerSheetRow"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW):t==="chatheadsNewMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE):t==="event"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_EVENT):t==="jewelSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_SEARCH):t==="inboxSpam"||t==="inboxThreadList"||t==="inboxRestricted"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX):t==="jewelNewMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE):t==="pendingRequests"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST):t==="sidebarSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH):t==="inboxRemainingThreads"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS):t==="pagesHeader"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON):t==="inboxRecentThreads"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS):t==="chatheads"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CHATHEADS):t==="pageResponsivenessCard"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD):t==="inboxSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH):t==="jewelNestedFolder"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER):t==="marketplace"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE):t==="feedOrganicPostViewAndMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE):t==="adsCta"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA):t==="chatInThread"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD):t==="payments"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").PAYMENTS):t==="inboxFolder"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER):t==="inboxArchived"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS):t==="inboxActiveContacts"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS):t==="sidebarContactsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST):t==="sidebarCommunityChatsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS):t==="igdChatTabsThreadView"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").IGD_WEB_CHAT_TAB_IN_THREAD):t==="inboxTrayActiveNow"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW):t==="communityFriendsDialog"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG):t==="pagesHomeFriendsDialog"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_PAGES_HOME_FRIENDS_DIALOG):t==="mutualFriendsDialog"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PROFILE_MUTUAL_FRIENDS_DIALOG):t==="birthday"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_BIRTHDAY_CENTER):t==="groupMembers"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_GROUPS_MEMBER_LIST):t==="fundraiserSupportersList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FUNDRAISER_SUPPORTERS_LIST):t==="memories"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MEMORIES):t==="feedPoll"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_FEED_POLL):t==="reactorList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_REACTORS_LIST_MESSAGE_BUTTON):t==="friendsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FRIENDS_HOME):t==="pagesPrivateReply"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_PAGES_PRIVATE_REPLY):t==="inboxNewMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_OMNIPICKER):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN)}l.getSourceWithoutReset=u,l.getSourceAndResetAttribution=c}),98);
__d("MAWEditMessageContext.react",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useMemo,m=u.useState;function p(e){var t=e.children,n=m(null),r=n[0],o=n[1],a=d(function(){return{editMessageData:r,setEditMessageData:o}},[r,o]);return s.jsx(_.Provider,{value:a,children:t})}p.displayName=p.name+" [from "+i.id+"]";var _=c({editMessageData:null,setEditMessageData:r("emptyFunction")});l.MAWEditMessageContext=p,l.Context=_}),98);
__d("MWChatFilePreProcessingErrorToast.react",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e={body:s._(/*BTDS*/"The file you have selected is not a valid format."),title:s._(/*BTDS*/"_j[\"Invalid file format\",\"f90fb65f92ad8ac33f140b8be3c9eed1\",1]")};l.invalidFileFormat=e}),226);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(t){return{body:s._(/*BTDS*/"The file you have selected is too large. The maximum size is {size}MB.",[s._param("size",t)]),title:s._(/*BTDS*/"Failed to upload files")}},u=function(t){return{body:s._(/*BTDS*/"You can only attach a maximum of {limit} files to a single message.",[s._param("limit",t)]),title:s._(/*BTDS*/"Unable to attach files")}},c=function(t){return{body:s._(/*BTDS*/"You can only attach a maximum of {limit} media to a single message.",[s._param("limit",t)]),title:s._(/*BTDS*/"Unable to attach media")}},d=function(){return{body:s._(/*BTDS*/"One or more selected files are not supported."),title:s._(/*BTDS*/"Unsupported File")}};l.maxFileSizeExceeded=e,l.maxFilesNumberExceeded=u,l.maxMediaNumberExceeded=c,l.unsupportedFile=d}),226);
__d("MWMediaComposerRenderQpl",["LSGetAttachmentType","MAWLoggerUtils","MWMediaRenderQplUtils","QPLUserFlow","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d=s.useRef;function m(e,t,n){var a,i=o("MAWLoggerUtils").getInstanceKeyFromId(e),l=o("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(t);r("QPLUserFlow").start((a=o("MWMediaRenderQplUtils")).MSGR_WEB_MEDIA_RENDER_EVENT,{annotations:{string:{attachment_type:a.getAttachmentTypeStringFromEnum(l),content_type:a.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(l),entry_point:"composer_view",thread_type:a.getThreadTypeString(n)}},cancelOnUnload:!0,instanceKey:i,timeoutInMs:a.QPL_TIMEOUT})}function p(e,t){var n=o("MAWLoggerUtils").getInstanceKeyFromId(e);r("QPLUserFlow").endCancel(o("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,{annotations:{string:{cancel_reason:t}},instanceKey:n})}function _(e,t){var n=o("MAWLoggerUtils").getInstanceKeyFromId(e);r("QPLUserFlow").addPoint(o("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,t,{instanceKey:n})}function f(e){var t=o("MAWLoggerUtils").getInstanceKeyFromId(e.offlineAttachmentId),n=d(!1);r("QPLUserFlow").addAnnotations(o("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,{string:{attachment_type:o("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(e.attachmentType),content_type:o("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(e.attachmentType)}},{instanceKey:t});var a=c(function(){return babelHelpers.extends({},o("MWMediaRenderQplUtils").createQplFlowCommon(o("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,t,n))},[]);return u(function(){return function(){n.current===!1&&(a==null?void 0:a.getInstanceKey())!=null&&(a==null||a.endCancelAfterDelay(706))}},[a]),a}l.startMediaComposerRenderQpl=m,l.endCancelMediaComposerRenderQpl=p,l.addPointMediaComposerRenderQpl=_,l.useMediaComposerRenderQpl=f}),98);
__d("MWSharedMediaManagerUtils",["GetPreviewDimension","I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t){if(!(t==null||e==null)){var n=Math.floor(e.previewHeight*t.previewWidth/e.previewWidth);return n>=t.previewHeight?{previewHeight:(c||(c=o("I64"))).of_float(n),previewWidth:c.of_float(t.previewWidth)}:{previewHeight:(c||(c=o("I64"))).of_float(t.previewHeight),previewWidth:c.of_float(e.previewWidth*t.previewHeight/e.previewHeight)}}}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var o=yield g(t,r);yield e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield y(e,o);yield(s||(s=n("Promise"))).all(t.map(function(t){return e.media_staging.add(t)}))});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":79")}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var o=yield g(t,r);yield e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield y(e,o);yield(s||(s=n("Promise"))).all(t.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){return(yield e.media_staging.get(t.offlineAttachmentId))!=null&&(yield e.media_staging.upsert([t.offlineAttachmentId],t)),(s||(s=n("Promise"))).resolve()});return function(e){return t.apply(this,arguments)}})()))});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":103")}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var a=yield(s||(s=n("Promise"))).all(e.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e.file,a=e.offlineAttachmentId,i=e.attachmentType!=null?(u||(u=o("LSIntEnum"))).ofNumber(e.attachmentType):yield o("LSGetAttachmentType").LSGetAttachmentType(n),l=URL.createObjectURL(n),s;e.previewHeight!=null&&e.previewWidth!=null?s={previewHeight:e.previewHeight,previewWidth:e.previewWidth}:n.type.includes("video/")?s=yield o("GetPreviewDimension").getVideoPreviewDimensions(l):s=yield o("GetPreviewDimension").getPreviewDimensions(l);var d={attachmentType:i,durationMs:void 0,fbid:void 0,filename:n.name,fileSize:(c||(c=o("I64"))).of_int32(n.size),hasError:!1,isHd:e.isHd,isSent:!1,mailboxType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),mimeType:n.type,offlineAttachmentId:a,offlineThreadingId:void 0,previewUrl:l,progress:0,threadKey:t};return{dimensions:s,mediaStaging:d}});return function(t){return e.apply(this,arguments)}})()));return a}),h.apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.sync_groups.get((c||(c=o("I64"))).of_float(1)),r;if((n==null?void 0:n.syncParams)!=null){var a=JSON.parse(n.syncParams),i=a.preview_height,l=a.preview_width;r={previewHeight:i,previewWidth:l}}return t.map(function(e){var t=e.dimensions,n=e.mediaStaging;return babelHelpers.extends({},n,d(t,r))})}),C.apply(this,arguments)}function b(e,t){return e.runInTransaction(function(e){return e.media_staging.delete(t)},"readwrite",void 0,void 0,i.id+":213")}function v(t){var n=(e||(e=r("useReStore")))();return o("ReQLSuspense").useArray(function(){return o("MWPreloadableQueries").getMediaStagingQuery(n,t.threadKey)},[n,t.threadKey],i.id+":223")}function S(e){return e.mimeType==="image/gif"?!0:e.mimeType==="image/webp"}function R(e){return e.mimeType==="image/gif"}l.insertMediaStaging=m,l.updateMediaStaging=_,l.prepareMediaStagingFiles=g,l.deleteMediaStaging=b,l.useMediaStaging=v,l.isVideoLikeImage=S,l.isGIFImage=R}),98);
__d("WorkFailedSendMessageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("6352"),s=o("FalcoLoggerInternal").create("work_failed_send_message",e),u=s;l.default=u}),98);
__d("useCometAlertDialog",["FDSDialogLoadingState.react","react","requireDeferred","useCometDeferredDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=r("requireDeferred")("FDSAlertDialogImpl.react").__setRef("useCometAlertDialog");function d(){return s.jsx(r("FDSDialogLoadingState.react"),{})}d.displayName=d.name+" [from "+i.id+"]";function m(){var e=r("useCometDeferredDialog")(c,d);return u(function(t,n,r){n===void 0&&(n=function(){}),e(t,n,r)},[e])}l.default=m}),98);
__d("useMWXAlertDialog",["react","useCometAlertDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=r("useCometAlertDialog")();return s(function(t,n,r){e(babelHelpers.extends({body:t.body},t),n,r)},[e])}l.default=u}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorToast.react","MWChatFileUploadErrorDialog.react","MWMediaComposerRenderQpl","MWPActor.react","MWPBumpEntityKey","MWSharedMediaManagerUtils","MessagingAttachmentType","OfflineThreadingId","Promise","WorkFailedSendMessageFalcoEvent","cr:8525","emptyFunction","gkx","promiseDone","requireDeferred","useMWXAlertDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),m=function(){return n("cr:8525")==null?(r("FBLogger")("messenger_web_media").warn("Unsupported thread type for media upload"),(c||(c=n("Promise"))).resolve(null)):n("cr:8525").load()},p=25;function _(e,t,r){return t?m().then(function(t){var o;return(c||(c=n("Promise"))).resolve((o=t==null?void 0:t.preprocessV2(e,r))!=null?o:[])}):d.load().then(function(t){return t.preprocess(e)})}function f(e,t,n){for(var r=0;r<e.length;r++){var a=e[r],i=n(a,t);if(a.size>i*1024*1024){var l=g(a.size);return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded."+(t?"secure":"open")),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded."+(t?"secure":"open")+"."+l),i}}return null}function g(e){return e<=30*1024*1024?"30MB":e<=50*1024*1024?"50MB":e<=75*1024*1024?"75MB":e<=100*1024*1024?"100MB":e<=150*1024*1024?"150MB":e<=200*1024*1024?"200MB":e<=250*1024*1024?"250MB":e<=500*1024*1024?"500MB":e<=1024*1024*1024?"1GB":"1GB+"}function h(t){var a=t.chatSupportUserId,i=t.chatSupportUserNonce,l=t.getMaxAttachmentSizeInMB,g=l===void 0?function(){return p}:l,h=t.isChatSupportUser,y=t.maxNumberOfAttachments,C=t.onUploadFailure,b=t.onUploadStart,v=t.onUploadSuccess,S=t.showUploadFailureToast,R=t.thread,L=t.validateFileName,E=(u||(u=r("useReStore")))(),k=r("useMWXAlertDialog")(),I=o("LSMessagingThreadTypeUtil").isArmadilloSecure(R.threadType),T=o("MWSharedMediaManagerUtils").useMediaStaging(R),D=T.length,x=o("MWPActor.react").useActor(),$=o("Int64Hooks").useCallbackInt64(function(t,l){var s=f(t,I,g);if(s!=null){k(o("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(s),r("emptyFunction"));return}if(y!=null&&D+t.length>y){r("gkx")("23249")?(k(o("MWChatFileUploadErrorDialog.react").maxFilesNumberExceeded(y),r("emptyFunction")),r("WorkFailedSendMessageFalcoEvent").log(function(){return{breaking_rule:"",event:"NUMBER_OF_ATTACHMENTS_LIMIT_REACHED"}})):k(o("MWChatFileUploadErrorDialog.react").maxMediaNumberExceeded(y),r("emptyFunction"));return}if(L!=null)for(var u=0;u<t.length;u++){var p=t[u];if(!L(p)){k(o("MWChatFileUploadErrorDialog.react").unsupportedFile(),r("emptyFunction"));return}}var T=o("OfflineThreadingId").createForItemsInOrder(t);T.forEach(function(e){var t=e[0],n=e[1];o("MWMediaComposerRenderQpl").startMediaComposerRenderQpl(n,t,R),o("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(n,"preprocess_start")}),r("promiseDone")(_(T,I,l).catch(function(){return S(o("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,o("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body),T.forEach(function(e){var t=e[0],n=e[1];o("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(n,"invalid-file-format")}),(c||(c=n("Promise"))).resolve([])}).then(function(t){t.forEach(function(e){o("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(e.offlineAttachmentId,"preprocess_success")});var n=r("gkx")("16543"),l=null;n?l=o("MWSharedMediaManagerUtils").insertMediaStaging(E,t,R.threadKey):r("promiseDone")(o("MWSharedMediaManagerUtils").insertMediaStaging(E,t,R.threadKey)),t.forEach(function(e){o("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(e.offlineAttachmentId,"media_staging_insert_success")});var s=R.threadKey;if(I)return m().then(function(e){return e==null?void 0:e.upload(E,s,t)});if(n){var u;return(u=l)==null?void 0:u.then(function(){return d.load().then(function(n){return n.upload(E,s,t,S,b,v,C,h,a,i,(e||(e=o("I64"))).to_string(x))})})}else return d.load().then(function(n){return n.upload(E,s,t,S,b,v,C,h,a,i,(e||(e=o("I64"))).to_string(x))})}))},[x,a,i,E,g,h,I,y,D,C,b,v,k,S,R,L]),P=function(t){r("promiseDone")(o("MWSharedMediaManagerUtils").deleteMediaStaging(E,t).then(function(){if(I&&n("cr:8525")!=null)return n("cr:8525").load().then(function(e){e.MAWMediaManagerAttachmentsV2.delete(t)})}))},N=function(){var e=T.map(function(e){return e.offlineAttachmentId});e.forEach(function(e){o("MWSharedMediaManagerUtils").deleteMediaStaging(E,e).catch(function(e){r("FBLogger")("messenger_web_media").catching(e).mustfix("Error deletting media staging.")})})},M=o("Int64Hooks").useCallbackInt64(function(t){I&&r("promiseDone")(m().then(function(a){if(a!=null){var i=T.map(function(t){var n;if(!(e||(e=o("I64"))).equal(t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)))return null;var i=(n=a.MAWMediaManagerAttachmentsV2.get(t.offlineAttachmentId))==null?void 0:n.originalFile;if(i==null)return null;var l=[i,t.offlineAttachmentId];return l}).filter(Boolean);i.length!==0&&r("promiseDone")(_(i,I,t).catch(function(){return S(o("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,o("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body),i.forEach(function(e){var t=e[0],n=e[1];o("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(n,"invalid-file-format")}),(c||(c=n("Promise"))).resolve([])}).then(function(e){e.forEach(function(e){o("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(e.offlineAttachmentId,"preprocess_success")}),r("promiseDone")(o("MWSharedMediaManagerUtils").updateMediaStaging(E,e,R.threadKey)),e.forEach(function(e){o("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(e.offlineAttachmentId,"media_staging_insert_success")});var t=R.threadKey;return a==null?void 0:a.upload(E,t,e)}))}}))});return{handleFileRemove:P,handleFileSelect:$,mediaStaging:T,onHdMediaToggled:M,resetAttachments:N}}l.convertIntegerSizeToStringBucket=g,l.useMediaManager=h}),98);
__d("getFBTSafeGenderFromGenderConst",["GenderConst","IntlVariations"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("GenderConst").MALE_SINGULAR:return r("IntlVariations").GENDER_MALE;case r("GenderConst").FEMALE_SINGULAR:return r("IntlVariations").GENDER_FEMALE;default:return r("IntlVariations").GENDER_UNKNOWN}}l.default=e}),98);
__d("getMessengerTimeBucket",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["TODAY","WEEK_AGO","CURRENT_YEAR","OTHER_YEAR"]),l=864e5,s=6*l;function u(t){var n=new Date(t),r=new Date,o=new Date(r.getFullYear(),r.getMonth(),r.getDate());return o<n?e.TODAY:o.getTime()-s<n.getTime()?e.WEEK_AGO:o.getFullYear()===n.getFullYear()?e.CURRENT_YEAR:e.OTHER_YEAR}function c(t){return u(t)===e.TODAY}i.MessengerTimeBucket=e,i.getMessengerTimeBucket=u,i.isTimeOnlyTimestamp=c}),66);
__d("getMessengerPreciseTimestamp",["formatDate","getMessengerTimeBucket"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({CURRENT_YEAR:"F jS, g:ia",OTHER_YEAR:"F j, Y g:i a",TODAY:"g:ia",WEEK_AGO:"l g:ia"});function s(t){var n=o("getMessengerTimeBucket").getMessengerTimeBucket(t);switch(n){case o("getMessengerTimeBucket").MessengerTimeBucket.TODAY:return e.TODAY;case o("getMessengerTimeBucket").MessengerTimeBucket.WEEK_AGO:return e.WEEK_AGO;case o("getMessengerTimeBucket").MessengerTimeBucket.CURRENT_YEAR:return e.CURRENT_YEAR;case o("getMessengerTimeBucket").MessengerTimeBucket.OTHER_YEAR:return e.OTHER_YEAR}}function u(e,t){return r("formatDate")(new Date(e),s(e),void 0,t)}l.default=u}),98);
__d("MWMessageDeliveryStatus",["fbt","I64","LSIntEnum","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","intlList","intlSummarizeNumber"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(e){if(e.length!==1)return{heads:e,type:"MultipleSeenHeads"};var t=e[0];return{head:t,type:"SingleSeenHead"}}function d(e,t){return{delivered:t,heads:e,type:"DeliveredAndRead"}}function m(e){return{count:e,type:"SeenCount"}}function p(e){return e.timestamp>0?s._(/*BTDS*/"_j{\"*\":\"Seen by {full name} at {seen time}\"}",[s._name("full name",e.name,r("getFBTSafeGenderFromGenderConst")(e.gender)),s._param("seen time",r("getMessengerPreciseTimestamp")(e.timestamp))]):s._(/*BTDS*/"_j{\"*\":\"Seen by {full name}\"}",[s._name("full name",e.name,r("getFBTSafeGenderFromGenderConst")(e.gender))])}function _(e,t){if(e.length===0)return"";if(t)return s._(/*BTDS*/"Seen by everyone").toString();var n=e.map(function(e){return s._(/*BTDS*/"_j{\"*\":\"{full name}\"}",[s._name("full name",e.name,r("getFBTSafeGenderFromGenderConst")(e.gender))])}),o=r("intlList")(n,r("intlList").CONJUNCTIONS.AND,r("intlList").DELIMITERS.COMMA);return s._(/*BTDS*/"Seen by {full name}",[s._param("full name",o)]).toString()}function f(e){var t=r("intlSummarizeNumber")(e);return s._(/*BTDS*/"Seen by {seen count}",[s._param("seen count",t)]).toString()}var g={delivered:s._(/*BTDS*/"Delivered"),error:s._(/*BTDS*/"Couldn't send"),loading:s._(/*BTDS*/"Loading..."),retriableError:s._(/*BTDS*/"Click to retry."),sending:s._(/*BTDS*/"Sending"),sent:s._(/*BTDS*/"Sent")};function h(e){switch(e.type){case"Sending":return g.sending;case"Sent":case"Delivered":return g.sent;case"Error":return g.error;case"SingleSeenHead":return p(e.head);case"NoneStatus":case"MultipleSeenHeads":return"";case"DeliveredAndRead":return _(e.heads,e.delivered);case"SeenCount":return f(e.count);case"Loading":return g.loading;case"RetriableError":return g.retriableError;case"ValidationError":return""}}function y(e){switch(e.type){case"Sending":return g.sending;case"Sent":return g.sent;case"Delivered":return g.delivered;case"Error":case"RetriableError":return g.error;case"SingleSeenHead":return p(e.head);case"DeliveredAndRead":return _(e.heads,e.delivered);default:return""}}function C(t){return(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1))?{type:"Sending"}:(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(6))?{type:"Sent"}:(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(5))?{type:"Error"}:{type:"NoneStatus"}}function b(t,n,r){var a=C(t.sendStatusV2);return(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(4))||(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(5))||(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(1))?a:!r&&(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))?{type:"NoneStatus"}:(e||(e=o("I64"))).ge(n,t.timestampMs)?{type:"Delivered"}:a}function v(e){return["SingleSeenHead","Sending","MultipleSeenHeads","Error","RetriableError"].includes(e.type)}l.seenHead=c,l.deliveredAndRead=d,l.seenCount=m,l.getSingleSeenHead=p,l.getSeenCount=f,l.Titles=g,l.getBroadcastStatusTitle=h,l.getStatusTitle=y,l.getFromSendStatus=C,l.getDeliveryStatusForMessageSentByYou=b,l.isAlwaysShownStatus=v}),226);
__d("MWPBaseMessageListRowActions.react",["react","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={hidden:{visibility:"xlshs6z",$$css:!0},incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",columnGap:"xl5lk40",display:"x78zum5",width:"x1mqs8db",$$css:!0}},d=s.createContext("full");function m(){return s.jsx(o("react-strict-dom").html.div,{role:"none",style:c.root})}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=e.children,n=e.outgoing;return s.jsx(o("react-strict-dom").html.div,{role:"none",style:[c.root,n?c.outgoing:c.incoming],children:t})}p.displayName=p.name+" [from "+i.id+"]";function _(e){var t=e.children,n=e.showWith,r=n===void 0?"full":n,a=u(d),i=a==="partial"&&r!=="partial";return s.jsx(o("react-strict-dom").html.div,{"aria-hidden":i,style:i&&c.hidden,children:t})}_.displayName=_.name+" [from "+i.id+"]";function f(e){var t=e.ariaHidden,n=e.children,r=e.onMouseEnter,a=e.onMouseLeave,i=e.outgoing,l=e.visibility,u=l===void 0?"full":l,c=e.xstyle;return s.jsx(d.Provider,{value:u,children:s.jsx(o("react-strict-dom").html.div,{"aria-hidden":t!=null?t:!1,onMouseEnter:r,onMouseLeave:a,style:[g.root,i?g.outgoing:g.incoming,c],children:s.jsx(p,{outgoing:i,children:n})})})}f.displayName=f.name+" [from "+i.id+"]";var g={incoming:{paddingInlineStart:"xaso8d8",$$css:!0},outgoing:{paddingInlineEnd:"x1gabggj",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1mqs8db",zIndex:"x1n327nk",$$css:!0}};l.MWPBaseMessageListRowActionsEmptyList=m,l.MWPBaseMessageListRowActionsList=p,l.MWPBaseMessageListRowActionsListItem=_,l.MWPBaseMessageListRowActionsContainer=f}),98);
__d("ThreadStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,PAUSED:1,PAUSED_AND_UPGRADED_TO_COMMUNITY:2,UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED:3});i.default=e}),66);
__d("MWPThreadCapabilitiesContext",["I64","Int64Hooks","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","ThreadStatus","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.createContext,p=d.useContext,_=m({air131ShareChatMessagesWithMetaAiEnabled:!1,blurMediaEnabled:!1,canUnsendMessage:!1,communityMessagingChannelDescriptionCustomization:!1,communityMessagingChannelInvite:!1,disableLinks:!1,editMessageEnabled:!1,feedbackAndReportEnabled:!1,hasLSThreadBitOffset:function(t){return!1},isPaused:!1,localDeleteMessageEnabled:!1,messageForwardEnabled:!1,messageUnsendEnabled:!1,modifyPinnedMessageV2Enabled:!1,reactEnabled:!1,reactionsV2WriteEnabled:!1,replyEnabled:!1,reportMessageToAdminEnabled:!1,rtcVideoCallEnabled:!1,rtcVoiceCallEnabled:!1,seenCountV2Enabled:!1,subThreadCreationEnabled:!1});function f(e){var t=e.children,n=e.customCapabilityCheck,a=e.thread,i=a.capabilities,l=a.capabilities2,d=a.capabilities3,m=a.capabilities4,p=a.capabilities5,f=a.threadType,g=o("Int64Hooks").useCallbackInt64(function(e){var t={capabilities:i,capabilities2:l,capabilities3:d,capabilities4:m,capabilities5:p,threadType:f};return o("LSThreadBitOffset").has(e,t)},[i,l,d,m,p,f]),h=o("Int64Hooks").useMemoInt64(function(){return{air131ShareChatMessagesWithMetaAiEnabled:g(256),blurMediaEnabled:g(46),canUnsendMessage:a.cannotUnsendReason!=null?(s||(s=o("I64"))).equal(a.cannotUnsendReason,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,communityMessagingChannelDescriptionCustomization:g(135),communityMessagingChannelInvite:g(120),disableLinks:g(45),editMessageEnabled:g(194),feedbackAndReportEnabled:g(17),hasLSThreadBitOffset:g!=null?g:n,isPaused:a.threadStatus!=null&&((s||(s=o("I64"))).equal(a.threadStatus,(s||(s=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(s||(s=o("I64"))).equal(a.threadStatus,(s||(s=o("I64"))).of_int32(r("ThreadStatus").PAUSED_AND_UPGRADED_TO_COMMUNITY))),localDeleteMessageEnabled:g(102),messageForwardEnabled:g(103),messageUnsendEnabled:g(122)&&a.cannotUnsendReason!=null?(s||(s=o("I64"))).equal(a.cannotUnsendReason,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!1,modifyPinnedMessageV2Enabled:g(172),reactEnabled:g(18),reactionsV2WriteEnabled:g(169),replyEnabled:g(42),reportMessageToAdminEnabled:g(93),rtcVideoCallEnabled:g(24),rtcVoiceCallEnabled:g(25),seenCountV2Enabled:g(140),subThreadCreationEnabled:g(167)}},[n,g,a.threadStatus,a.cannotUnsendReason]);return c.jsx(_.Provider,{value:h,children:t})}f.displayName=f.name+" [from "+i.id+"]";function g(){return p(_)}l.Provider=f,l.useMWPThreadCapabilitiesContext=g}),98);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e.map(function(e,t){var n=o("EmojiRenderer").parse(e).map(function(e){return e.emoji});return n.length!==1?"":n[0].join("")}).filter(function(e){return e!==""})}function c(e,t){var n=(s||(s=r("useReStore")))(),a=o("MWPActor.react").useActor(),l=o("ReQLSuspense").useFirst(function(){return t!=null&&e!=null?o("ReQL").fromTableAscending(n.tables.reactions).getKeyRange(t,e,a):o("ReQL").empty()},[a,n,e,t],i.id+":38");if(l!=null)return l}function d(t,n){var a=(s||(s=r("useReStore")))(),l=o("ReQLSuspense").useArray(function(){return n!=null&&t!=null?o("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(n,t).filter(function(t){return t.viewerIsReactor&&(e||(e=o("I64"))).gt(t.count,(e||(e=o("I64"))).zero)}).map(function(e){var t=o("ReQLSuspense").first(o("ReQL").fromTableAscending(a.tables.reaction_v2_types).getKeyRange(e.reactionFbid),i.id+":70");return[t==null?void 0:t.reactionLiteral,t==null?void 0:t.reactionLiteralVariant16].filter(Boolean)}):o("ReQL").empty()},[a,n,t],i.id+":60").flat(),c=u(l);return c}function m(e,t){var n=(s||(s=r("useReStore")))(),a=o("ReQLSuspense").useFirst(function(){return t!=null&&e!=null?o("ReQL").fromTableAscending(n.tables.reactions_v2).getKeyRange(t,e).filter(function(e){return e.viewerIsReactor}):o("ReQL").empty()},[n,e,t],i.id+":94");return o("ReQLSuspense").useFirst(function(){return a?o("ReQL").fromTableAscending(n.tables.reaction_v2_types).getKeyRange(a.reactionFbid).map(function(e){return e.reactionLiteral}):o("ReQL").empty()},[n,a],i.id+":104")}var p={useSelectedReaction:c,useSelectedReactionsV2:d,useSelectedReactionV2:m};l.MWV2MessageReactionHooks=p}),98);
__d("MessageReactionOperation",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});i.default=e}),66);
__d("MessageReactionStyle",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,BASIC_SUPER_REACT_ANIMATION:1,FB_EMOJI:2,FB_NON_DEFAULT_EMOJI:3});i.default=e}),66);
__d("MessagingCommunityType",[],(function(t,n,r,o,a,i){var e=Object.freeze({FB_COMMUNITY:0,STANDALONE_COMMUNITY:1});i.default=e}),66);
__d("isDeliveryStatusErrorState",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.type==="Error"||e.type==="RetriableError"}i.default=e}),66);
__d("mwCMisStandAloneCommunity",["I64","LSIntEnum","MessagingCommunityType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return t==null?!1:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingCommunityType").STANDALONE_COMMUNITY))}l.default=u}),98);
__d("useContactReachabilityStatus",["I64","Int64Hooks","LSContactBitOffset","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n=o("react-compiler-runtime").c(7),r=o("MWPActor.react").useActor(),a=c(e,t),i;n[0]!==r||n[1]!==a[0]||n[2]!==a.length?(i=function(){if(a.length===1){var e=a[0],t=e[1].id;return(s||(s=o("I64"))).equal(r,t)}return!1},n[0]=r,n[1]=a[0],n[2]=a.length,n[3]=i):i=n[3];var l;n[4]!==r||n[5]!==a?(l=[r,a],n[4]=r,n[5]=a,n[6]=l):l=n[6];var u=o("Int64Hooks").useMemoInt64(i,l);return u}function c(e,t){var n=o("react-compiler-runtime").c(7),r;n[0]!==e.tables.contacts||n[1]!==e.tables.participants||n[2]!==t?(r=function(){return o("ReQL").mergeJoin(o("ReQL").fromTableAscending(e.tables.participants,[]).getKeyRange(t),o("ReQL").fromTableAscending(e.tables.contacts,["id","name","firstName","secondaryName","blockedByViewerStatus"].concat(o("LSContactBitOffset").contactCapabilityFields,["blockedSinceTimestampMs","contactTypeExact","contactReachabilityStatusType"])))},n[0]=e.tables.contacts,n[1]=e.tables.participants,n[2]=t,n[3]=r):r=n[3];var a;n[4]!==e||n[5]!==t?(a=[e,t],n[4]=e,n[5]=t,n[6]=a):a=n[6];var l=o("ReQLSuspense").useArray(r,a,i.id+":51");return l}function d(e,t,n){var r=o("react-compiler-runtime").c(6),a=c(e,t),i=u(e,t),l=o("MWPActor.react").useActor(),d,m;r[0]!==l||r[1]!==i||r[2]!==a||r[3]!==n?(d=function(){if(o("LSMessagingThreadTypeUtil").isOneToOne(n)){if(a.length===1){var e=a[0];if(i)return e}return a.find(function(e){var t=e[1];return!(s||(s=o("I64"))).equal(t.id,l)})}},m=[l,i,a,n],r[0]=l,r[1]=i,r[2]=a,r[3]=n,r[4]=d,r[5]=m):(d=r[4],m=r[5]);var p=o("Int64Hooks").useMemoInt64(d,m);return p}function m(t,n){var o=(e||(e=r("useReStore")))(),a=d(o,t,n);return a==null?void 0:a[1].contactReachabilityStatusType}l.useIsSelfThread=u,l.useParticipantsAndContacts=c,l.useOtherUser=d,l.useContactReachabilityStatus=m}),98);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=(u||(u=r("useReStore")))(),a=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableDescending(n.tables.ai_bot_feedback_submission_status).getKeyRange(t!=null?t:"").filter(function(t){return(e||(e=o("I64"))).equal(t.feedbackSubmissionStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(e){return e.feedbackSubmissionStatus})},[n,t],i.id+":25");return a}l.default=c}),98);
__d("useIGDOptimisticReactMessage",["I64","LSAuthorityLevel","MAWTimeUtils","WATimeUtils","asyncToGeneratorRuntime","err","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(){return u(function(e,t,a,l,u){return e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{if(u==null){var n=yield e.reactions.get(t,a,l);return yield e.reactions.delete(t,a,l),{removedReaction:n}}else{var i={actorId:l,authorityLevel:(s||(s=o("I64"))).of_int32(r("LSAuthorityLevel").OPTIMISTIC),messageId:a,reaction:u!=null?u:"",threadKey:t,timestampMs:o("MAWTimeUtils").toTimestamp(o("WATimeUtils").unixTime()),transportKey:"Instamadillo"};return yield e.reactions.upsert([t,a,l],i),{addedReaction:i}}}catch(e){throw r("err")("Instamadillo: Failed to send or unsend optimistic reaction: "+e+" ")}});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":39")},[])}l.default=c}),98);
__d("useIsChatPreviewsEnabled",["MWLSThread","ReQL","ReQLSuspense","isUnjoinedCMThread","mwCMisStandAloneCommunity","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a=(e||(e=r("useReStore")))(),l=o("MWLSThread").useThread(t,function(e){return e.parentThreadKey}),s=o("ReQLSuspense").useFirst(function(){return l!=null?o("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(l):o("ReQL").empty()},[a,l],i.id+":27");return(n=o("MWLSThread").useThread(t,function(e){return u(e,s==null?void 0:s.communityType)}))!=null?n:!1}function u(e,t){return e.needsAdminApprovalForNewParticipant===!0||!o("isUnjoinedCMThread").isUnjoinedCMThread(e.threadType)?!1:r("mwCMisStandAloneCommunity")(t)}l.useIsChatPreviewsEnabled=s,l.isChatPreviewsEnabled=u}),98);
__d("useIsMultiReactionEnabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","isUnjoinedCMThread","mwCMIsAnyCMThread","useIsChatPreviewsEnabled","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a=(e||(e=r("useReStore")))(),l=o("MWLSThread").useThread(t,function(e){return e.parentThreadKey}),s=o("ReQLSuspense").useFirst(function(){return l!=null?o("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(l):o("ReQL").empty()},[a,l],i.id+":28");return(n=o("MWLSThread").useThread(t,function(e){if(o("isUnjoinedCMThread").isUnjoinedCMThread(e.threadType))return o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(e,s==null?void 0:s.communityType);if(!o("LSThreadBitOffset").has(156,e))return!1;if(r("mwCMIsAnyCMThread")(e.threadType)||o("LSMessagingThreadTypeUtil").isDiscoverableChannel(e.threadType))return!0}))!=null?n:!1}l.useIsMultiReactEnabled=s}),98);
__d("useIsReactionsV2Enabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWLSThread","ReQL","ReQLSuspense","useIsChatPreviewsEnabled","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a=(e||(e=r("useReStore")))(),l=o("MWLSThread").useThread(t,function(e){return e.parentThreadKey}),s=o("ReQLSuspense").useFirst(function(){return l!=null?o("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(l):o("ReQL").empty()},[a,l],i.id+":34");return(n=o("MWLSThread").useThread(t,function(e){return u(e,s==null?void 0:s.communityType)}))!=null?n:!1}function u(e,t){if(o("LSMessagingThreadTypeUtil").isOpenFnFThread(e)&&!o("MWCMThreadTypes.react").isIGBroadcastChannelThread(e.threadSubtype))return!1;if(o("LSThreadBitOffset").has(139,e))return!0;var n=o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(e,t);return!!n}function c(e,t){var n=o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(e.threadType)||o("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(e.threadType),r=o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(e,t);return n||r}l.useIsReactionsV2Enabled=s,l.isReactionsV2Enabled=u,l.isReactionsV2ReadOnly=c}),98);
__d("useLSMessagingSource",["IGDWebUtils","MWLSThreadDisplayContext"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),t=o("IGDWebUtils").isOnInstagramWeb();switch(e){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return t?"igdChatTabsThreadView":"chatInThread";default:return"unknown"}}l.default=e}),98);
__d("useMWLSDefaultThreadSourceAndResetAttribution",["LSThreadAttributionTypeUtil","react","useLSMessagingSource"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=r("useLSMessagingSource")();return s(function(t){return o("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(t,e)},[e])}l.default=u}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSourceAndResetAttribution","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,a,l,u){r("promiseDone")(e.runInTransaction(function(e){return r("LSOptimisticUpsertReactionV2StoredProcedure")(r("LSFactory")(e),{actorId:t,currentCount:l,messageId:n.messageId,messageTimestamp:n.timestampMs,operation:(s||(s=o("LSIntEnum"))).ofNumber(r("MessageReactionOperation").ADD),reactionFbid:a,reactionLiteral:u,reactionStyle:s.ofNumber(r("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:n.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,i.id+":42"))}function d(e,t,n,r,o,a,i){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,l,u,c){yield e.runInTransaction(function(e){return r("LSOptimisticUpsertReactionV2StoredProcedure")(r("LSFactory")(e),{actorId:t,currentCount:a,messageId:n.messageId,messageTimestamp:n.timestampMs,operation:(s||(s=o("LSIntEnum"))).ofNumber(c?r("MessageReactionOperation").REMOVE_MULTI_REACT:r("MessageReactionOperation").REMOVE),reactionFbid:l,reactionLiteral:u,reactionStyle:s.ofNumber(r("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:n.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,i.id+":72")}),m.apply(this,arguments)}function p(e,t,n,a,i){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(n.threadKey,n.messageId,a)).then(function(r){r!=null?c(e,t,n,a,r.count,i):c(e,t,n,a,(u||(u=o("I64"))).zero,i)}))}function _(t){var a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s=r("useMWLSDefaultThreadSourceAndResetAttribution")(),c=o("useIsMultiReactionEnabled").useIsMultiReactEnabled(t.threadKey);return o("Int64Hooks").useCallbackInt64(function(e){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(t.threadKey)),m=n?o("useIsReactionsV2Enabled").isReactionsV2Enabled(n):!1;if(m){var _=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.reaction_v2_types).filter(function(t){return t.reactionLiteral===e||t.reactionLiteralVariant16===e}));if(_!=null){var f=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(t.threadKey,t.messageId).filter(function(e){return(!c||(u||(u=o("I64"))).equal(e.reactionFbid,_.reactionFbid))&&e.viewerIsReactor}));if(f==null)return p(a,l,t,_.reactionFbid,e);var g=(u||(u=o("I64"))).equal(f.reactionFbid,_.reactionFbid);(!c||g)&&(yield d(a,l,t,f.count,f.reactionFbid,e,c)),g||(yield p(a,l,t,_.reactionFbid,e))}else r("FBLogger")("messenger_web").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return a.runInTransaction(function(n){return r("LSOptimisticUpsertReactionStoredProcedure")(r("LSFactory")(n),{actorId:l,messageId:t.messageId,reaction:e,sendAttribution:s(t.threadKey),threadKey:t.threadKey,timestampMs:(u||(u=o("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,i.id+":227")})())},[a,t,c,l,s])}l.default=_}),98);
__d("useIGDGlobalReactMessage",["FBLogger","I64","IGDBridgedAPI","Int64Hooks","LSAuthorityLevel","MWPActor.react","ReQL","ReQLSuspense","asyncToGeneratorRuntime","promiseDone","react-compiler-runtime","requireDeferred","useIGDOptimisticReactMessage","useMWPSendOrUnsendReaction","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("MWLogMessageAction").__setRef("useIGDGlobalReactMessage");function c(e,t){var a=o("react-compiler-runtime").c(18),l=(s||(s=r("useReStore")))(),c=o("MWPActor.react").useActor(),m=e.transportKey==="Instamadillo",p=r("useIGDOptimisticReactMessage")(),_;a[0]!==l.tables.e2ee_igMessageAuxiliaryInfo||a[1]!==e.messageId?(_=function(){return o("ReQL").fromTableAscending(l.tables.e2ee_igMessageAuxiliaryInfo).getKeyRange(e.messageId)},a[0]=l.tables.e2ee_igMessageAuxiliaryInfo,a[1]=e.messageId,a[2]=_):_=a[2];var f;a[3]!==l||a[4]!==e.messageId?(f=[l,e.messageId],a[3]=l,a[4]=e.messageId,a[5]=f):f=a[5];var g=o("ReQLSuspense").useFirst(_,f,i.id+":51"),h=!!(g!=null&&g.openEb),y=r("useMWPSendOrUnsendReaction")(e),C,b;return a[6]!==c||a[7]!==p||a[8]!==l||a[9]!==m||a[10]!==h||a[11]!==e.messageId||a[12]!==e.senderId||a[13]!==e.threadKey||a[14]!==y||a[15]!==t?(C=function(){return(function(){var o=n("asyncToGeneratorRuntime").asyncToGenerator(function*(o,a){if(m||h){var i=yield p(l,e.threadKey,e.messageId,c,o),s=i.removedReaction,_={messageId:e.messageId,reaction:s!=null?s.reaction:o,reactionStatus:s!=null?"deleted":"created",threadKey:e.threadKey};r("promiseDone")(r("IGDBridgedAPI").sendOrRemoveReaction(_).catch((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){throw yield d(l,e.threadKey,e.messageId,c,s),r("FBLogger")("igd_web").catching(t).warn("Instamadillo: Failed to send or unsend reaction: %s.",t)});return function(e){return t.apply(this,arguments)}})()))}else y(o!=null?o:"");u.onReady(function(n){return r("promiseDone")(n.log(l,e.messageId,e.threadKey,t,a,void 0,void 0,void 0,e.senderId,void 0,c))})});return function(e,t){return o.apply(this,arguments)}})()},b=[m,h,p,e.threadKey,e.messageId,e.senderId,l,c,y,t],a[6]=c,a[7]=p,a[8]=l,a[9]=m,a[10]=h,a[11]=e.messageId,a[12]=e.senderId,a[13]=e.threadKey,a[14]=y,a[15]=t,a[16]=C,a[17]=b):(C=a[16],b=a[17]),o("Int64Hooks").useMemoInt64(C,b)}function d(t,a,l,s,u){return t.runInTransaction((function(){var i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){if(u!=null)return n.reactions.upsert([u.threadKey,u.messageId,u.actorId],babelHelpers.extends({},u));var i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.reactions).getKeyRange(a,l,s).filter(function(t){return(e||(e=o("I64"))).equal(t.authorityLevel,e.of_int32(r("LSAuthorityLevel").OPTIMISTIC))}));if(i!=null)return n.reactions.delete(i.threadKey,i.messageId,i.actorId)});return function(e){return i.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":147")}l.default=c}),98);
__d("useIGDIsCannesThread.react",["I64","LSContactReachabilityStatusType","LSIntEnum","react-compiler-runtime","useContactReachabilityStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=o("react-compiler-runtime").c(2),i=o("useContactReachabilityStatus").useContactReachabilityStatus(t,n),l;a[0]!==i?(l=i!=null&&(e||(e=o("I64"))).equal(i,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactReachabilityStatusType").UNREACHABLE_R_ACCOUNT_TEEN_INTERACTION)),a[0]=i,a[1]=l):l=a[1];var u=l;return u}l.default=u}),98);
__d("useIGDIsGenAiReelsPlugin",["I64","LSIntEnum","MNLSXMALayoutType","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=o("react-compiler-runtime").c(10),a=(u||(u=r("useReStore")))(),l;n[0]!==a.tables.attachments||n[1]!==t.messageId||n[2]!==t.threadKey?(l=function(){return o("ReQL").fromTableDescending(a.tables.attachments).getKeyRange(t.threadKey,t.messageId)},n[0]=a.tables.attachments,n[1]=t.messageId,n[2]=t.threadKey,n[3]=l):l=n[3];var c;n[4]!==a||n[5]!==t?(c=[a,t],n[4]=a,n[5]=t,n[6]=c):c=n[6];var d=o("ReQLSuspense").useFirst(l,c,i.id+":24");if(t.botResponseId==null||d==null)return!1;var m;return n[7]!==d.hasXma||n[8]!==d.xmaLayoutType?(m=d.hasXma&&d.xmaLayoutType!=null&&(e||(e=o("I64"))).equal(d.xmaLayoutType,(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)),n[7]=d.hasXma,n[8]=d.xmaLayoutType,n[9]=m):m=n[9],m}l.default=c}),98);
__d("useIGDMediaMangerUploadFailedToast",["fbt","IGDSErrorOutlineIcon.react","react","react-compiler-runtime","useIGDSToaster"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(){var e=o("react-compiler-runtime").c(2),t=r("useIGDSToaster")(),n;return e[0]!==t?(n=function(n,o){t.add({icon:u.jsx(r("IGDSErrorOutlineIcon.react"),{alt:s._(/*BTDS*/"Error icon")}),message:n,messageSecondary:o,target:"bottom-left"},{duration:2750})},e[0]=t,e[1]=n):n=e[1],n}l.default=d}),226);
__d("useIGDMessageAttachment",["I64","LSIntEnum","MessagingAttachmentType","ReQL","ReQLSuspense","mwpMessageHasAttachment","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){var a=o("react-compiler-runtime").c(15),l;a[0]!==t?(l=r("mwpMessageHasAttachment")(t),a[0]=t,a[1]=l):l=a[1];var s=l,u,d;a[2]!==e.tables.attachments||a[3]!==s||a[4]!==t.messageId||a[5]!==n?(u=function(){return s?o("ReQL").fromTableAscending(e.tables.attachments,["attachmentType","isSharable","stickerType","xmaLayoutType"]).getKeyRange(n,t.messageId):o("ReQL").empty()},d=[s,e.tables.attachments,n,t.messageId],a[2]=e.tables.attachments,a[3]=s,a[4]=t.messageId,a[5]=n,a[6]=u,a[7]=d):(u=a[6],d=a[7]);var m=o("ReQLSuspense").useArray(u,d,i.id+":43"),p=m[0],_=m.length>1,f;a[8]!==m||a[9]!==_?(f=_&&m.some(c),a[8]=m,a[9]=_,a[10]=f):f=a[10];var g=f,h;return a[11]!==p||a[12]!==_||a[13]!==g?(h={attachment:p,hasMultipleAttachments:_,isVideoStack:g},a[11]=p,a[12]=_,a[13]=g,a[14]=h):h=a[14],h}function c(t){return(e||(e=o("I64"))).equal(t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))}l.default=u}),98);
__d("useIGDMessageReply.react",["fbt","IGDThreadListNewMessageLoggingDataContext","MWMediaManager","MWPReplyContext.react","MessengerWebUXLogger","react","react-compiler-runtime","useIGDMediaMangerUploadFailedToast"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).useContext;function c(e,t,n){var a=o("react-compiler-runtime").c(13),i=u(o("MWPReplyContext.react").MWPReplyContext),l=i.setReply,c=r("useIGDMediaMangerUploadFailedToast")(),d;a[0]!==c||a[1]!==t?(d={showUploadFailureToast:c,thread:t},a[0]=c,a[1]=t,a[2]=d):d=a[2];var m=o("MWMediaManager").useMediaManager(d),p=m.resetAttachments,_=r("MessengerWebUXLogger").useInteractionLogger(),f=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),g;a[3]!==f||a[4]!==_||a[5]!==e||a[6]!==n||a[7]!==p||a[8]!==l?(g=function(r){_==null||_({eventName:"message_reply",extraData:{},flowInstanceId:f}),l({isReported:e.takedownState!=null,messageId:e.messageId,offlineThreadingId:e.offlineThreadingId,sendStatusV2:e.sendStatusV2,text:e.text,threadKey:e.threadKey,timestampMs:e.timestampMs},e.threadKey),p(),n==null||n()},a[3]=f,a[4]=_,a[5]=e,a[6]=n,a[7]=p,a[8]=l,a[9]=g):g=a[9];var h=g,y;a[10]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Reply"),a[10]=y):y=a[10];var C=y,b;return a[11]!==h?(b=[h,C],a[11]=h,a[12]=b):b=a[12],b}l.default=c}),226);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=o("MWPContactContext.react").useMWPContactStableContext(),i=a.contact;return t==null||!n?!1:i!=null&&(e||(e=o("I64"))).equal(i.contactTypeExact,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT))}l.default=u}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWMessageDeliveryStatus","MWPThreadCapabilitiesContext","isDeliveryStatusErrorState"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),a=n.canUnsendMessage;if(r("isDeliveryStatusErrorState")(o("MWMessageDeliveryStatus").getFromSendStatus(t.sendStatusV2)))return!1;var i=t.cannotUnsendReason!=null?(e||(e=o("I64"))).equal(t.cannotUnsendReason,(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0;return a&&i}l.default=u}),98);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(t,n,a,l){var u=(e||(e=r("useReStore")))();return c(function(e){r("promiseDone")(u.runInTransaction(function(n){return r("LSSubmitGenAIBotFeedbackStoredProcedure")(r("LSFactory")(n),{botFeedbackKind:(s||(s=o("LSIntEnum"))).ofNumber(e),botId:a,botResponseId:t||"",feedbackKindType:s.ofNumber(e),messageId:l})},"readwrite",void 0,void 0,i.id+":33"),n)},[u,t,a,l,n])}l.default=d}),98);